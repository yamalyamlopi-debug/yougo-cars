<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name="theme-color" content="#07070e">
<title>YOUGO CARS â€” ×©×•×§ ×”×¨×›×‘×™× ×”×“×™×’×™×˜×œ×™</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
/* â”€â”€ TOKENS â”€â”€ */
:root{
  --red:#e8112e; --red2:#b50d24;
  --bg:#0a0a12; --bg2:#0f0f1e; --bg3:#141428;
  --card:#121224; --card2:#181832;
  --b0:rgba(255,255,255,.10); --b1:rgba(255,255,255,.20);
  --bred:rgba(232,17,46,.35); --bred2:rgba(232,17,46,.6);
  --t0:#ffffff;
  --t1:rgba(255,255,255,.78);
  --t2:rgba(255,255,255,.48);
  --gold:#f0c84a;
  --r:16px; --r2:22px; --r3:28px;
  --nav:62px;
  --ease:cubic-bezier(.4,0,.2,1);
  --font:'Heebo',system-ui,sans-serif;
}
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth;-webkit-text-size-adjust:100%}
body{font-family:var(--font);background:var(--bg);color:#ffffff;overflow-x:hidden;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
img{display:block;max-width:100%}
a{color:inherit;text-decoration:none}
::-webkit-scrollbar{width:3px}
::-webkit-scrollbar-thumb{background:var(--red);border-radius:2px}

/* Subtle noise grain for depth */
body::before{
  content:'';position:fixed;inset:0;z-index:0;pointer-events:none;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.035'/%3E%3C/svg%3E");
  background-repeat:repeat;background-size:200px 200px;opacity:.4;mix-blend-mode:overlay;
}

/* â”€â”€ NAV â”€â”€ */
#nav{
  position:fixed;top:0;left:0;right:0;z-index:500;height:var(--nav);
  padding:0 14px;
  display:flex;align-items:center;gap:8px;
  background:rgba(7,7,14,.78);backdrop-filter:blur(28px) saturate(1.8);
  border-bottom:1px solid rgba(255,255,255,.055);
  transition:background .3s var(--ease),border-color .3s var(--ease);
  overflow:hidden; /* ×× ×™×¢×ª ×’×œ×™×©×” */
}
#nav.solid{background:rgba(7,7,14,.97);border-color:var(--b0)}

/* LOGO */
.logo{display:flex;align-items:center;gap:8px;cursor:pointer;flex-shrink:0;min-width:0}
/* Logo box = exact App.tsx: w-9 h-9 rounded-xl */

.nav-mid{display:flex;gap:2px;flex-shrink:0}
.nav-a{padding:6px 11px;border-radius:9px;font-size:12.5px;font-weight:700;color:var(--t1);
  cursor:pointer;background:none;border:none;font-family:var(--font);transition:all .18s;white-space:nowrap}
.nav-a:hover{color:var(--t0);background:rgba(255,255,255,.07)}

/* nav-end â€” push to left edge, never shrink below content */
.nav-end{display:flex;gap:6px;align-items:center;margin-right:auto;flex-shrink:0}

/* ×–×¨ Ø§Ù„Ù„ØºØ© */
.btn-lang{
  display:inline-flex;align-items:center;gap:6px;
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.12);
  color:var(--t0);
  padding:7px 12px;border-radius:10px;font-size:12px;cursor:pointer;
  font-family:var(--font);transition:all .2s var(--ease);font-weight:700;
  letter-spacing:.02em;white-space:nowrap;flex-shrink:0;
}
.btn-lang:hover{border-color:rgba(200,16,46,.5);background:rgba(200,16,46,.08);color:#fff}
.btn-lang .lang-icon{
  width:18px;height:18px;border-radius:4px;
  display:flex;align-items:center;justify-content:center;
  background:linear-gradient(135deg,var(--red),#e0162f);
  font-size:9px;font-weight:900;color:#fff;letter-spacing:0;flex-shrink:0;
}
/* Ø²Ø± ×—×‘×™×œ×•×ª ÙÙŠ Ø§Ù„Ù€ nav */
.btn-pkg-nav{
  display:inline-flex;align-items:center;gap:5px;
  padding:8px 12px;border-radius:10px;font-size:12px;font-weight:900;
  background:rgba(212,175,55,.1);border:1.5px solid rgba(212,175,55,.35);
  color:var(--gold);cursor:pointer;font-family:var(--font);
  white-space:nowrap;text-decoration:none;flex-shrink:0;
  transition:all .18s;
}
.btn-pkg-nav:hover{background:rgba(212,175,55,.2);border-color:rgba(212,175,55,.6)}

.btn{display:inline-flex;align-items:center;gap:6px;padding:9px 16px;
  border-radius:11px;font-family:var(--font);font-weight:900;font-size:13px;
  cursor:pointer;border:none;transition:all .2s var(--ease);white-space:nowrap;text-decoration:none}
.btn-red{background:linear-gradient(135deg,var(--red),#e0162f);color:#fff;
  box-shadow:0 4px 16px rgba(200,16,46,.38)}
.btn-red:hover{transform:translateY(-1px);box-shadow:0 6px 22px rgba(200,16,46,.54)}

/* â”€â”€ ADMIN BAR â”€â”€ */
#adminBar{display:none;background:rgba(200,16,46,.06);border-bottom:1px solid var(--bred);
  padding:9px 22px;align-items:center;gap:10px;flex-wrap:wrap}
#adminBar.show{display:flex}

/* â”€â”€ HERO â”€â”€ */
.hero{
  position:relative;min-height:100svh;
  display:flex;align-items:center;justify-content:center;text-align:center;
  padding:calc(var(--nav) + 56px) 22px 72px;
  overflow:hidden;
}
.hero-bg{
  position:absolute;inset:0;z-index:0;
  background:
    radial-gradient(ellipse 120% 60% at 50% -5%,rgba(232,17,46,.42) 0%,transparent 58%),
    radial-gradient(ellipse 60% 50% at 2% 88%,rgba(232,17,46,.18) 0%,transparent 50%),
    radial-gradient(ellipse 55% 45% at 98% 85%,rgba(90,20,220,.12) 0%,transparent 50%),
    radial-gradient(ellipse 80% 40% at 50% 50%,rgba(20,10,50,.6) 0%,transparent 80%),
    var(--bg);
}
.hero-grid{
  position:absolute;inset:0;z-index:0;
  background-image:
    linear-gradient(rgba(255,255,255,.07) 1px,transparent 1px),
    linear-gradient(90deg,rgba(255,255,255,.07) 1px,transparent 1px);
  background-size:52px 52px;
  -webkit-mask-image:radial-gradient(ellipse 96% 78% at 50% 32%,#000 28%,transparent 75%);
  mask-image:radial-gradient(ellipse 96% 78% at 50% 32%,#000 28%,transparent 75%);
}
.hero-glow{
  position:absolute;top:-80px;left:50%;transform:translateX(-50%);
  width:800px;height:500px;
  background:radial-gradient(ellipse,rgba(232,17,46,.28) 0%,transparent 65%);
  filter:blur(60px);z-index:0;pointer-events:none;
}
.hero-in{position:relative;z-index:2;max-width:840px;width:100%}

/* Badge */
.hero-badge{
  display:inline-flex;align-items:center;gap:8px;
  padding:8px 20px;border-radius:100px;margin-bottom:28px;
  background:rgba(232,17,46,.15);border:1px solid rgba(232,17,46,.45);
  animation:fu .6s ease both;
  box-shadow:0 0 24px rgba(232,17,46,.15);
}
.badge-dot{width:7px;height:7px;border-radius:50%;background:var(--red);
  animation:blink 2s infinite;box-shadow:0 0 10px var(--red)}
@keyframes blink{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.4;transform:scale(.7)}}
.hero-badge span{font-size:11.5px;font-weight:800;color:rgba(255,255,255,.88);
  text-transform:uppercase;letter-spacing:.12em}

@keyframes fu{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}

/* FIX 3: hero h1 â€” Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø®Ø· Ø§Ù„Ø£Ø­Ù…Ø± Ø¨ÙŠÙ† Ø§Ù„Ø³Ø·Ø±ÙŠÙ† */
.hero h1{
  font-size:clamp(2.6rem,8vw,5.6rem);font-weight:900;line-height:1.06;
  letter-spacing:-2px;margin-bottom:22px;animation:fu .6s .1s ease both;
  color:#ffffff;text-shadow:0 2px 40px rgba(0,0,0,.9);
}
.hero h1 .r{
  color:transparent;
  background:linear-gradient(125deg,#ff5878 0%,#e8112e 55%,#ff2040 100%);
  -webkit-background-clip:text;background-clip:text;
  text-decoration:none;border:none;display:inline;
  filter:drop-shadow(0 0 20px rgba(232,17,46,.55));
}
.hero h1 br{display:block;content:'';border:none;background:none}
.hero h1 span{border:none !important;text-decoration:none !important;box-shadow:none !important}

.hero-sub{
  font-size:clamp(1rem,2vw,1.16rem);color:rgba(255,255,255,.84);
  line-height:1.75;max-width:500px;margin:0 auto 36px;
  animation:fu .6s .2s ease both;
  text-shadow:0 1px 12px rgba(0,0,0,.6);
}

/* CTA row */
.hero-ctas{
  display:flex;gap:10px;justify-content:center;flex-wrap:wrap;
  margin-bottom:48px;animation:fu .6s .3s ease both;
}
.hero-ctas .btn{padding:14px 30px;font-size:15px}

/* â˜… Packages button */
.btn-pkg{
  display:inline-flex;align-items:center;gap:9px;
  padding:13px 26px;border-radius:14px;
  background:linear-gradient(135deg,rgba(212,175,55,.14),rgba(212,175,55,.06));
  border:1.5px solid rgba(212,175,55,.45);color:var(--gold);
  font-weight:900;font-size:14px;cursor:pointer;
  font-family:var(--font);transition:all .22s var(--ease);text-decoration:none;
}
.btn-pkg:hover{
  background:linear-gradient(135deg,rgba(212,175,55,.26),rgba(212,175,55,.12));
  border-color:rgba(212,175,55,.75);transform:translateY(-2px);
  box-shadow:0 8px 28px rgba(212,175,55,.22);
}
.btn-ghost{
  background:rgba(255,255,255,.08);border:1px solid var(--b0);
  color:var(--t1);font-size:15px;padding:14px 30px;
}
.btn-ghost:hover{background:rgba(255,255,255,.13);color:var(--t0);border-color:var(--b1)}

/* Stats */
.hero-stats{
  display:flex;max-width:500px;margin:0 auto;
  border:1px solid rgba(255,255,255,.14);border-radius:20px;
  background:rgba(255,255,255,.06);overflow:hidden;
  box-shadow:0 8px 32px rgba(0,0,0,.4),inset 0 1px 0 rgba(255,255,255,.08);
  backdrop-filter:blur(12px);
  animation:fu .6s .4s ease both;
}
.hs{flex:1;padding:20px 14px;text-align:center;position:relative}
.hs:not(:last-child)::after{
  content:'';position:absolute;right:0;top:20%;bottom:20%;
  width:1px;background:rgba(255,255,255,.14);
}
.hs-v{font-size:1.8rem;font-weight:900;color:#ffffff;text-shadow:0 2px 12px rgba(0,0,0,.5)}
.hs-v .a{color:var(--red)}
.hs-l{font-size:10px;color:rgba(255,255,255,.55);margin-top:3px;font-weight:700;
  text-transform:uppercase;letter-spacing:.08em}

/* â”€â”€ TICKER â”€â”€ */
.ticker{
  overflow:hidden;border-top:1px solid var(--b0);border-bottom:1px solid var(--b0);
  background:rgba(255,255,255,.016);height:42px;display:flex;align-items:center;
}
.ticker-inner{display:flex;white-space:nowrap;animation:tick 26s linear infinite}
@keyframes tick{from{transform:translateX(0)}to{transform:translateX(-50%)}}
.ti{display:flex;align-items:center;gap:8px;padding:0 26px;height:42px;
  font-size:12.5px;font-weight:700;color:rgba(255,255,255,.72);border-left:1px solid rgba(255,255,255,.08)}
.ti:first-child{border-left:none}

/* â”€â”€ SEARCH â”€â”€ */
.search-wrap{padding:52px 22px 0;max-width:980px;margin:0 auto}

.search-eyebrow{
  display:flex;align-items:center;gap:8px;margin-bottom:13px;
}
.search-eyebrow-line{width:28px;height:2px;border-radius:2px;background:var(--red)}
.search-eyebrow-text{font-size:10.5px;font-weight:900;color:#ff4466;
  text-transform:uppercase;letter-spacing:.14em}

.search-card{
  background:linear-gradient(160deg,#181832,#0f0f1e);
  border:1.5px solid rgba(255,255,255,.16);
  border-radius:22px;overflow:hidden;
  box-shadow:0 6px 40px rgba(0,0,0,.55),0 0 0 1px rgba(200,16,46,.07);
  transition:border-color .22s,box-shadow .22s;
}
.search-card:focus-within{
  border-color:rgba(200,16,46,.48);
  box-shadow:0 6px 40px rgba(0,0,0,.55),0 0 0 4px rgba(200,16,46,.07);
}

.search-main{
  display:flex;align-items:center;
  padding:7px 7px 7px 18px;
  border-bottom:1px solid rgba(255,255,255,.10);
  gap:10px;
}
.search-ico{font-size:17px;color:var(--t2);flex-shrink:0}
.search-input{
  flex:1;background:none;border:none;outline:none;
  font-size:15px;font-weight:600;color:var(--t0);
  font-family:var(--font);padding:10px 4px;min-width:0;
}
.search-input::placeholder{color:rgba(255,255,255,.38)}
.search-go{
  padding:11px 28px;border-radius:14px;border:none;
  background:linear-gradient(135deg,var(--red),#e0162f);
  color:#fff;font-family:var(--font);font-size:14px;font-weight:900;
  cursor:pointer;transition:all .2s var(--ease);flex-shrink:0;
  box-shadow:0 4px 14px rgba(200,16,46,.4);
}
.search-go:hover{transform:translateY(-1px);box-shadow:0 6px 22px rgba(200,16,46,.56)}

.filter-strip{
  display:flex;gap:4px;padding:6px 8px;
  overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:none;
}
.filter-strip::-webkit-scrollbar{display:none}
.fc{
  display:flex;align-items:center;gap:5px;
  padding:8px 14px;border-radius:10px;cursor:pointer;
  background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);
  color:rgba(255,255,255,.78);font-size:12.5px;font-weight:700;
  white-space:nowrap;font-family:var(--font);
  transition:all .18s;flex-shrink:0;
  appearance:none;-webkit-appearance:none;outline:none;
}
.fc:hover,.fc:focus{
  border-color:rgba(200,16,46,.38);color:var(--t0);
  background:rgba(200,16,46,.07);
}
.fc option{background:#101022}

/* â”€â”€ LISTINGS â”€â”€ */
.main{max-width:1240px;margin:0 auto;padding:42px 20px 100px}
.main::before{
  content:'';position:fixed;inset:0;z-index:-1;
  background:radial-gradient(ellipse 70% 50% at 50% 0%,rgba(232,17,46,.06) 0%,transparent 60%),var(--bg);
  pointer-events:none;
}
.list-head{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:12px;margin-bottom:22px}
.list-title{font-size:1.5rem;font-weight:900;color:#ffffff}
.list-title .r{color:var(--red)}
.cnt-badge{
  padding:5px 14px;border-radius:100px;font-size:12px;font-weight:800;
  background:rgba(200,16,46,.1);border:1px solid rgba(200,16,46,.2);color:var(--red);
}
.sort-row{display:flex;gap:6px;margin-bottom:24px;flex-wrap:wrap}
.sort-btn{
  padding:7px 15px;border-radius:9px;border:1px solid rgba(255,255,255,.14);
  background:rgba(255,255,255,.05);color:rgba(255,255,255,.75);font-family:var(--font);
  font-size:12px;font-weight:700;cursor:pointer;transition:all .18s;white-space:nowrap;
}
.sort-btn:hover{color:var(--t0);border-color:var(--b1);background:rgba(255,255,255,.05)}
.sort-btn.on{background:rgba(200,16,46,.1);border-color:var(--bred);color:var(--red)}

/* â”€â”€ CARS GRID â”€â”€ */
.cars-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(285px,1fr));
  gap:16px;
}

/* â”€â”€ CAR CARD â”€â”€ */
.car-card{
  background:linear-gradient(160deg,#181832 0%,#121224 100%);
  border:1px solid rgba(255,255,255,.12);
  border-radius:var(--r2);overflow:hidden;cursor:pointer;
  display:flex;flex-direction:column;position:relative;
  transition:transform .24s var(--ease),border-color .24s,box-shadow .24s;
  box-shadow:0 4px 24px rgba(0,0,0,.5);
}
.car-card:hover{
  transform:translateY(-5px);
  border-color:rgba(232,17,46,.45);
  box-shadow:0 20px 56px rgba(0,0,0,.7),0 0 0 1px rgba(232,17,46,.15),inset 0 1px 0 rgba(255,255,255,.06);
}

.car-img-wrap{position:relative;overflow:hidden;aspect-ratio:16/10;background:var(--bg3);flex-shrink:0}
.car-img{width:100%;height:100%;object-fit:cover;display:block;transition:transform .4s ease}
.car-card:hover .car-img{transform:scale(1.05)}
.car-placeholder{width:100%;height:100%;display:flex;align-items:center;
  justify-content:center;font-size:46px;opacity:.35;background:linear-gradient(135deg,#1a1a36,#141428)}

.car-badges{position:absolute;top:9px;right:9px;display:flex;flex-direction:column;gap:4px;align-items:flex-end}
.cbadge{padding:3px 9px;border-radius:100px;font-size:9.5px;font-weight:900;backdrop-filter:blur(8px)}
.cb-feat{background:rgba(212,175,55,.88);color:#000}
.cb-sold{background:rgba(239,68,68,.85);color:#fff}
.cb-new{background:rgba(200,16,46,.88);color:#fff}
.car-cnt{position:absolute;bottom:8px;left:8px;padding:2px 8px;border-radius:100px;
  font-size:9.5px;font-weight:800;background:rgba(0,0,0,.65);
  color:rgba(255,255,255,.82);backdrop-filter:blur(6px)}
.pend-bar{background:rgba(234,179,8,.14);border-bottom:1px solid rgba(234,179,8,.28);
  color:#fbbf24;font-size:10.5px;font-weight:800;padding:6px 14px;text-align:center}

.car-body{padding:14px;display:flex;flex-direction:column;gap:9px;flex:1;background:transparent}
.car-name{font-size:15.5px;font-weight:900;line-height:1.3;color:#ffffff}
.car-meta{font-size:11.5px;color:rgba(255,255,255,.7);font-weight:600}
.car-price{font-size:22px;font-weight:900;color:#ff3355;letter-spacing:-.5px;text-shadow:0 0 20px rgba(232,17,46,.35)}
.specs{display:flex;flex-wrap:wrap;gap:4px}
.spec{padding:3px 9px;border-radius:7px;background:rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.14);font-size:10.5px;font-weight:700;color:rgba(255,255,255,.82);
  transition:border-color .2s}
.car-card:hover .spec{border-color:rgba(255,255,255,.12)}

.car-foot{display:flex;align-items:center;justify-content:space-between;
  padding-top:9px;border-top:1px solid rgba(255,255,255,.10);margin-top:auto}
.car-loc{font-size:11px;color:rgba(255,255,255,.58);font-weight:600}
.car-acts{display:flex;gap:5px}
.act{width:32px;height:32px;border-radius:8px;display:flex;align-items:center;
  justify-content:center;font-size:14px;transition:all .18s;border:1px solid var(--b0);
  text-decoration:none}
.act-wa{background:rgba(37,211,102,.1)}
.act-wa:hover{background:rgba(37,211,102,.22);transform:scale(1.1)}
.act-call{background:rgba(59,130,246,.1)}
.act-call:hover{background:rgba(59,130,246,.22);transform:scale(1.1)}

.admin-row{padding:8px 12px;display:flex;gap:6px;border-top:1px solid var(--b0)}
.a-btn{flex:1;padding:7px;border-radius:8px;font-size:11.5px;font-weight:900;
  cursor:pointer;border:none;font-family:var(--font);transition:all .15s}
.a-approve{background:rgba(74,222,128,.1);border:1px solid rgba(74,222,128,.28);color:#4ade80}
.a-sold{background:rgba(212,175,55,.1);border:1px solid rgba(212,175,55,.28);color:var(--gold)}
.a-del{flex:0;padding:7px 11px;background:rgba(239,68,68,.1);border:1px solid rgba(239,68,68,.28);color:#ef4444}

/* Loading / empty */
.loading-box{grid-column:1/-1;padding:80px;display:flex;flex-direction:column;
  align-items:center;gap:14px}
.spin{width:36px;height:36px;border-radius:50%;
  border:3px solid rgba(255,255,255,.07);border-top-color:var(--red);
  animation:sp .75s linear infinite}
@keyframes sp{to{transform:rotate(360deg)}}
.empty-box{grid-column:1/-1;padding:80px 20px;text-align:center}
.empty-ico{font-size:52px;opacity:.24;margin-bottom:14px}
.empty-box h3{font-size:1.3rem;font-weight:900;margin-bottom:8px}
.empty-box p{color:var(--t1)}

/* â”€â”€ FOOTER â”€â”€ */
footer{border-top:1px solid rgba(255,255,255,.12);padding:36px 20px;background:rgba(255,255,255,.02)}
.foot-in{max-width:1200px;margin:0 auto;display:flex;
  align-items:center;justify-content:space-between;flex-wrap:wrap;gap:16px}
.foot-brand{display:flex;align-items:center;gap:9px}
.foot-box{width:32px;height:32px;border-radius:9px;
  background:linear-gradient(135deg,var(--red),var(--red2));
  display:flex;align-items:center;justify-content:center}
.foot-name{font-size:14px;font-weight:900}
.foot-name .r{color:var(--red)}
.foot-copy{font-size:11.5px;color:rgba(255,255,255,.52);font-weight:600}
.foot-links{display:flex;gap:6px;align-items:center;flex-wrap:wrap}
.foot-link{padding:5px 11px;border-radius:7px;font-size:11.5px;font-weight:700;
  color:rgba(255,255,255,.6);background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);
  transition:all .15s}
.foot-link:hover{color:#fff;border-color:rgba(255,255,255,.28)}
.foot-dot{cursor:pointer;opacity:.1;transition:opacity .2s;font-size:16px;
  color:var(--red);user-select:none}
.foot-dot:hover{opacity:.4}

/* â”€â”€ MODALS â”€â”€ */
.overlay{
  position:fixed;inset:0;z-index:600;
  background:rgba(0,0,0,0);backdrop-filter:blur(0);
  display:flex;align-items:flex-end;justify-content:center;
  pointer-events:none;transition:all .3s var(--ease);
}
.overlay.open{background:rgba(0,0,0,.86);backdrop-filter:blur(20px);
  pointer-events:all;align-items:center}
.modal{
  background:var(--bg2);border:1px solid var(--b0);
  border-radius:var(--r3);width:100%;max-width:680px;max-height:92svh;
  overflow:hidden;display:flex;flex-direction:column;
  transform:translateY(30px) scale(.97);opacity:0;
  transition:all .3s var(--ease);
}
.overlay.open .modal{transform:translateY(0) scale(1);opacity:1}
.modal-head{
  display:flex;align-items:center;justify-content:space-between;
  padding:16px 20px;border-bottom:1px solid var(--b0);
  background:rgba(7,7,14,.9);backdrop-filter:blur(12px);
  flex-shrink:0;position:sticky;top:0;z-index:2;
}
.modal-title{font-size:15px;font-weight:900}
.modal-x{
  width:30px;height:30px;border-radius:8px;display:flex;
  align-items:center;justify-content:center;
  background:rgba(255,255,255,.07);border:1px solid var(--b0);
  color:var(--t1);cursor:pointer;font-size:18px;line-height:1;
  transition:all .15s;
}
.modal-x:hover{background:rgba(239,68,68,.12);color:#ef4444;border-color:rgba(239,68,46,.3)}
.modal-body{padding:20px;overflow-y:auto;flex:1;-webkit-overflow-scrolling:touch}
.modal-body::-webkit-scrollbar{width:2px}
.modal-body::-webkit-scrollbar-thumb{background:var(--red)}

/* Detail */
.d-gal{margin-bottom:18px}
.d-main-img{width:100%;aspect-ratio:16/9;object-fit:cover;border-radius:var(--r);display:block}
.d-thumbs{display:flex;gap:7px;padding:8px 0;overflow-x:auto;-webkit-overflow-scrolling:touch}
.d-thumbs::-webkit-scrollbar{display:none}
.d-thumb{width:68px;height:50px;object-fit:cover;border-radius:8px;
  cursor:pointer;border:2px solid transparent;transition:all .18s;
  flex-shrink:0;opacity:.6}
.d-thumb.on,.d-thumb:hover{border-color:var(--red);opacity:1}
.d-hrow{display:flex;align-items:flex-start;justify-content:space-between;
  gap:12px;margin-bottom:18px;flex-wrap:wrap}
.d-name{font-size:1.45rem;font-weight:900;margin-bottom:4px}
.d-sub{font-size:12.5px;color:var(--t1);font-weight:600}
.d-price{font-size:1.7rem;font-weight:900;color:var(--red)}
.d-price-lbl{font-size:10.5px;color:var(--t2);font-weight:700}
.d-specs{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-bottom:16px}
.d-spec{background:rgba(255,255,255,.03);border:1px solid var(--b0);
  border-radius:11px;padding:12px 10px;text-align:center}
.d-spec-v{font-size:13px;font-weight:800;color:#fff;margin-bottom:3px}
.d-spec-k{font-size:9px;color:var(--t2);font-weight:700;text-transform:uppercase;letter-spacing:.06em}
.d-desc{background:rgba(255,255,255,.03);border:1px solid var(--b0);
  border-radius:11px;padding:14px;font-size:13.5px;color:var(--t1);
  line-height:1.7;margin-bottom:14px}
.seller-row{display:flex;align-items:center;gap:12px;
  background:rgba(255,255,255,.03);border:1px solid var(--b0);
  border-radius:11px;padding:14px;margin-bottom:12px}
.seller-av{width:44px;height:44px;border-radius:50%;
  background:rgba(200,16,46,.12);border:1px solid rgba(200,16,46,.22);
  display:flex;align-items:center;justify-content:center;font-size:18px;flex-shrink:0}
.seller-name{font-weight:800;font-size:14.5px;margin-bottom:2px}
.seller-city{font-size:11.5px;color:var(--t1)}
.cta-row{display:flex;gap:8px}
.cta-wa,.cta-call{flex:1;padding:13px 16px;border-radius:12px;
  display:flex;align-items:center;justify-content:center;gap:7px;
  font-size:13.5px;font-weight:900;transition:all .2s;text-decoration:none}
.cta-wa{background:rgba(37,211,102,.1);border:1px solid rgba(37,211,102,.28);color:#4ade80}
.cta-wa:hover{background:rgba(37,211,102,.2);transform:translateY(-2px)}
.cta-call{background:rgba(59,130,246,.1);border:1px solid rgba(59,130,246,.28);color:#60a5fa}
.cta-call:hover{background:rgba(59,130,246,.2);transform:translateY(-2px)}

/* Form */
.fg{display:grid;grid-template-columns:1fr 1fr;gap:11px}
.fg-item{display:flex;flex-direction:column;gap:5px}
.fg-item.full{grid-column:1/-1}
.fg-label{font-size:10.5px;font-weight:800;color:var(--t1);
  text-transform:uppercase;letter-spacing:.08em}
.fg-input,.fg-sel,.fg-ta{
  background:var(--bg3);border:1px solid var(--b0);color:#fff;
  padding:10px 13px;border-radius:10px;outline:none;
  transition:all .18s;width:100%;font-size:13.5px;font-family:var(--font);
}
.fg-input:focus,.fg-sel:focus,.fg-ta:focus{
  border-color:rgba(200,16,46,.5);box-shadow:0 0 0 3px rgba(200,16,46,.07)}
.fg-input::placeholder{color:var(--t2)}
.fg-sel option{background:#101022}
.fg-ta{resize:vertical;min-height:80px}
.form-divider{font-size:12px;font-weight:800;color:var(--t1);
  padding:14px 0 8px;border-top:1px solid var(--b0);grid-column:1/-1;margin-top:2px}
.form-divider:first-child{border-top:none;padding-top:0}

.up-zone{border:2px dashed var(--b0);border-radius:var(--r);
  padding:24px;text-align:center;cursor:pointer;transition:all .2s;position:relative}
.up-zone:hover{border-color:var(--bred);background:rgba(200,16,46,.04)}
.up-zone input{position:absolute;inset:0;opacity:0;cursor:pointer;width:100%;height:100%}
.up-ico{font-size:28px;margin-bottom:7px;opacity:.4}
.up-txt{font-size:12.5px;color:var(--t1);font-weight:600}
.prev-grid{display:flex;flex-wrap:wrap;gap:7px;margin-top:8px}
.prev-wrap{position:relative;width:68px;height:50px;border-radius:8px;overflow:hidden}
.prev-img{width:100%;height:100%;object-fit:cover}
.prev-rm{position:absolute;top:2px;right:2px;width:17px;height:17px;border-radius:50%;
  background:rgba(239,68,68,.9);color:#fff;border:none;cursor:pointer;
  font-size:10px;display:flex;align-items:center;justify-content:center;font-weight:900}
.prog{margin:6px 0;display:none;background:var(--bg3);border-radius:100px;height:4px;overflow:hidden}
.prog-bar{height:100%;background:linear-gradient(90deg,var(--red),#e0162f);
  border-radius:100px;width:0%;transition:width .3s}
.submit-btn{width:100%;padding:14px;border-radius:12px;margin-top:8px;
  background:linear-gradient(135deg,var(--red),#e0162f);color:#fff;border:none;
  font-size:15px;font-weight:900;cursor:pointer;
  box-shadow:0 5px 20px rgba(200,16,46,.38);transition:all .2s;font-family:var(--font)}
.submit-btn:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 7px 26px rgba(200,16,46,.5)}
.submit-btn:disabled{opacity:.6;cursor:not-allowed;transform:none}
.success-wrap{text-align:center;padding:36px 20px}
.suc-ico{font-size:52px;margin-bottom:14px}

/* Toast */
#toast{
  position:fixed;bottom:24px;left:50%;transform:translateX(-50%) translateY(70px);
  padding:12px 22px;border-radius:12px;font-size:13.5px;font-weight:800;
  z-index:9999;pointer-events:none;transition:all .28s var(--ease);
  background:rgba(10,10,20,.98);border:1px solid var(--b0);
  box-shadow:0 8px 28px rgba(0,0,0,.55);white-space:nowrap;
}
#toast.show{transform:translateX(-50%) translateY(0)}
#toast.ok{border-color:rgba(74,222,128,.4);color:#4ade80}
#toast.err{border-color:rgba(239,68,68,.4);color:#ef4444}

/* â”€â”€ RESPONSIVE â”€â”€ */
@media(max-width:900px){.nav-mid{display:none}}

/* Mobile: logo box + lang icon only + small post btn */
@media(max-width:600px){
  :root{--nav:54px}
  #nav{padding:0 12px;height:54px;gap:7px}
  /* ×—×‘×™×œ×•×ª â€” × ×¡×ª×¨ ×‘××•×‘×™×™×œ */
  .btn-pkg-nav{display:none !important}
  /* ×œ×•×’×• â€” ×”×¡×ª×¨ "ISRAEL", ×”×¦×’ ×¨×§ "YOUGO" */
  .logo-israel{display:none}
  .logo-text{font-size:14px}
  /* ×©×¤×” â€” ×”×¡×ª×¨ ×˜×§×¡×˜, ×”×¦×’ ×¨×§ ××¨×•×‘×¢ */
  #langTxt{display:none}
  .btn-lang{padding:6px 7px;gap:0}
  .btn-lang .lang-icon{width:28px;height:28px;border-radius:7px;font-size:10px}
  /* ×›×¤×ª×•×¨ ×¤×¨×¡× â€” ×§×•××¤×§×˜×™ */
  .btn-nav-post{padding:8px 13px !important;font-size:12px !important}
  .btn{padding:7px 12px;font-size:12px}
  .hero{padding:calc(54px + 44px) 16px 60px}
  .hero h1{font-size:2.2rem;letter-spacing:-1px}
  .hero-sub{font-size:.95rem}
  .hero-ctas{gap:8px}
  .hero-ctas .btn{padding:12px 20px;font-size:13.5px}
  .btn-pkg{padding:12px 18px;font-size:13px}
  .search-wrap{padding:36px 14px 0}
  .main{padding:28px 14px 80px}
  .cars-grid{grid-template-columns:repeat(2,1fr);gap:9px}
  .car-body{padding:10px;gap:7px}
  .car-name{font-size:12.5px}
  .car-meta{font-size:10px}
  .car-price{font-size:14px}
  .specs{gap:3px}
  .spec{font-size:9px;padding:2px 6px}
  .car-loc{font-size:9.5px}
  .act{width:28px;height:28px;font-size:13px}
  .car-img-wrap{aspect-ratio:4/3}
  .car-cnt{font-size:9px;padding:2px 5px}
  .modal{border-radius:20px 20px 0 0;max-height:94svh}
  .d-specs{grid-template-columns:repeat(2,1fr)}
  .cta-row{flex-direction:column}
  .d-hrow{flex-direction:column}
  .fg{grid-template-columns:1fr}
  .foot-in{flex-direction:column;gap:12px;text-align:center}
}
@media(max-width:380px){
  .hero h1{font-size:1.9rem}
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ADD MODAL â€” REDESIGNED
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.add-modal{
  max-width:620px !important;border-radius:24px !important;
  overflow:hidden;display:flex;flex-direction:column;
  background:linear-gradient(160deg,#1a0008 0%,#0e0008 100%) !important;
  border:1px solid rgba(200,16,46,.3) !important;
  box-shadow:0 24px 80px rgba(200,16,46,.25),0 0 0 1px rgba(200,16,46,.15) !important;
}

/* Red gradient header */
.add-modal-head{
  display:flex;align-items:center;justify-content:space-between;
  padding:18px 20px;flex-shrink:0;
  background:linear-gradient(135deg,#c8102e 0%,#a00d24 40%,#7a0818 100%);
  position:relative;overflow:hidden;
}
.add-modal-head::before{
  content:'';position:absolute;inset:0;
  background:radial-gradient(ellipse 80% 120% at 30% -20%,rgba(255,100,100,.25) 0%,transparent 60%),
    url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='3'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.06'/%3E%3C/svg%3E");
  pointer-events:none;
}
.add-head-logo{display:flex;align-items:center;gap:12px;position:relative;z-index:1}
.add-head-logo svg{flex-shrink:0;filter:drop-shadow(0 2px 8px rgba(0,0,0,.3))}
.add-head-title{font-size:16px;font-weight:900;color:#fff;line-height:1.2;
  text-shadow:0 1px 6px rgba(0,0,0,.3)}
.add-head-sub{font-size:10.5px;font-weight:700;color:rgba(255,255,255,.65);
  text-transform:uppercase;letter-spacing:.1em;margin-top:2px}
.add-modal-head .modal-x{
  position:relative;z-index:1;
  background:rgba(255,255,255,.15);border-color:rgba(255,255,255,.25);color:#fff;
}
.add-modal-head .modal-x:hover{background:rgba(0,0,0,.25);border-color:rgba(255,255,255,.3)}

/* Upload zone */
.add-upload-zone{
  flex-shrink:0;
  background:linear-gradient(160deg,rgba(200,16,46,.28) 0%,rgba(140,8,30,.22) 100%);
  border-bottom:1px solid rgba(200,16,46,.4);
  padding:14px 16px;cursor:pointer;
  transition:background .2s;
}
.add-upload-zone:hover{background:linear-gradient(160deg,rgba(200,16,46,.38) 0%,rgba(140,8,30,.30) 100%)}
.add-upload-inner{display:flex;align-items:center;gap:12px;padding:10px 0}
.add-up-icon{
  width:46px;height:46px;border-radius:12px;flex-shrink:0;
  background:rgba(200,16,46,.2);border:1.5px dashed rgba(200,16,46,.5);
  display:flex;align-items:center;justify-content:center;
}
.add-up-txt{font-size:14px;font-weight:800;color:#fff}
.add-up-txt span{color:rgba(255,255,255,.6);font-weight:600}
.add-up-hint{font-size:11px;color:rgba(255,255,255,.42);margin-top:3px}
.add-upload-zone .prev-grid{margin-top:6px;display:flex;flex-wrap:wrap;gap:7px}
.add-upload-zone .prog{margin:8px 0 2px;display:none;background:rgba(255,255,255,.12);border-radius:100px;height:3px}

/* Scrollable body */
.add-body-scroll{padding:0 !important;overflow-y:auto;flex:1;
  background:linear-gradient(180deg,#1a0008 0%,#12000a 40%,#0e000a 100%);}
.add-body-scroll form{padding:16px 18px 20px}

/* Sections â€” all red-tinted */
.add-section{
  margin-bottom:14px;padding:16px;border-radius:16px;
  background:rgba(200,16,46,.07);
  border:1px solid rgba(200,16,46,.22);
}
.add-section-seller{
  background:rgba(200,16,46,.12);
  border-color:rgba(200,16,46,.35);
}
.add-section-title{
  display:flex;align-items:center;gap:8px;
  font-size:11px;font-weight:900;color:rgba(255,180,180,.8);
  text-transform:uppercase;letter-spacing:.12em;margin-bottom:14px;
}
.add-section-dot{
  width:6px;height:6px;border-radius:50%;background:var(--red);
  box-shadow:0 0 8px var(--red);flex-shrink:0;
}

/* Row layouts */
.add-row2{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:10px}
.add-row3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;margin-bottom:10px}

/* Input styles â€” brighter on dark */
.fg-item{display:flex;flex-direction:column;gap:5px}
.fg-label{font-size:10px;font-weight:900;color:rgba(255,255,255,.6);
  text-transform:uppercase;letter-spacing:.1em}
.fg-input,.fg-sel,.fg-ta{
  background:rgba(0,0,0,.35);
  border:1.5px solid rgba(200,16,46,.3);
  color:#fff;
  padding:10px 13px;border-radius:11px;outline:none;
  transition:all .18s;width:100%;font-size:13.5px;font-family:var(--font);
}
.fg-input:focus,.fg-sel:focus,.fg-ta:focus{
  border-color:rgba(200,16,46,.8);
  background:rgba(0,0,0,.45);
  box-shadow:0 0 0 3px rgba(200,16,46,.18);
}
.fg-input::placeholder{color:rgba(255,255,255,.3)}
.fg-ta::placeholder{color:rgba(255,255,255,.3)}
.fg-sel{appearance:none;-webkit-appearance:none}
.fg-sel option{background:#121224;color:#fff}
.fg-ta{resize:vertical;min-height:72px}

/* Submit button */
.submit-btn{
  width:100%;padding:15px;border-radius:14px;margin-top:14px;
  background:linear-gradient(135deg,#e8112e,#c8102e,#a00d22);
  color:#fff;border:none;
  font-size:15px;font-weight:900;cursor:pointer;
  box-shadow:0 6px 24px rgba(200,16,46,.45),inset 0 1px 0 rgba(255,255,255,.15);
  transition:all .2s;font-family:var(--font);
  display:flex;align-items:center;justify-content:center;gap:9px;
  letter-spacing:.02em;
}
.submit-btn:hover:not(:disabled){
  transform:translateY(-2px);
  box-shadow:0 10px 32px rgba(200,16,46,.58),inset 0 1px 0 rgba(255,255,255,.2);
}
.submit-btn:disabled{opacity:.6;cursor:not-allowed;transform:none}
.sub-icon{font-size:18px}

/* Mobile */
@media(max-width:600px){
  .add-row2{grid-template-columns:1fr 1fr}
  .add-row3{grid-template-columns:1fr 1fr}
  .add-section{padding:12px}
  .add-body-scroll form{padding:12px 14px 16px}
}
@media(max-width:400px){
  .add-row2,.add-row3{grid-template-columns:1fr}
}

</style>
</head>
<body>

<!-- NAV -->
<nav id="nav">
  <div class="logo" onclick="showHome()">
    <div class="logo-box">
      <!-- Lucide Car icon â€” exact same as App.tsx -->
      <svg width="19" height="19" viewBox="0 0 24 24" fill="none"
           stroke="#ffffff" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M19 17H5a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.38L8 4h8l1.62 3H19a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2z"/>
        <circle cx="8.5" cy="17" r="2.5"/>
        <circle cx="15.5" cy="17" r="2.5"/>
      </svg>
    </div>
    <div>
      <span class="logo-text"><span class="r">YOUGO</span><span style="color:#ffffff"> CARS</span></span>
    </div>
  </div>

  <div class="nav-mid">
    <button class="nav-a" onclick="scrollTo2('searchSec')">ğŸ” ×—×™×¤×•×©</button>
    <button class="nav-a" onclick="scrollTo2('listSec')">ğŸš— ××•×“×¢×•×ª</button>
    <button class="nav-a" onclick="open('https://yougo-roan.vercel.app','_blank')">ğŸŒ YOUGO ISRAEL</button>
  </div>

  <div class="nav-end">
    <button class="btn-lang" onclick="cycleLang()" id="langBtn">
      <span class="lang-icon" id="langIco">HE</span>
      <span id="langTxt">×¢×‘×¨×™×ª</span>
    </button>
    <a class="btn-pkg-nav" href="https://yougo-roan.vercel.app" target="_blank">ğŸ’¼ ×—×‘×™×œ×•×ª</a>
    <button class="btn btn-red btn-nav-post" onclick="openAdd()">+ <span id="navTxt">×¤×¨×¡× ×¨×›×‘</span></button>
  </div>
</nav>

<!-- ADMIN BAR -->
<div id="adminBar">
  <span style="font-weight:900;color:var(--red);font-size:13px">ğŸ”‘ Admin Mode</span>
  <div id="adminActs" style="display:flex;gap:7px;align-items:center;flex-wrap:wrap"></div>
</div>

<!-- HERO -->
<div class="hero" id="heroSec" style="margin-top:var(--nav)">
  <div class="hero-bg"></div>
  <div class="hero-grid"></div>
  <div class="hero-glow"></div>
  <div class="hero-in">
    <div class="hero-badge">
      <div class="badge-dot"></div>
      <span id="heroBadge">YOUGO ISRAEL â€” ×”×¤×œ×˜×¤×•×¨××” ×”××•×‘×™×œ×”</span>
    </div>
    <!-- FIX 3: h1 Ø¨Ø¯ÙˆÙ† Ø®Ø· Ø£Ø­Ù…Ø± â€” Ø§Ø³ØªØ®Ø¯Ø§Ù… <span> Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† <br> Ø¯Ø§Ø®Ù„ Ø§Ù„Ù†Øµ Ø§Ù„Ù…Ù„ÙˆÙ† -->
    <h1 id="heroH">×©×•×§ ×”×¨×›×‘×™× <span class="r">×”×“×™×’×™×˜×œ×™</span><br><span style="color:var(--t0)">×©×œ ×™×©×¨××œ</span></h1>
    <p class="hero-sub" id="heroSub">×§× ×” ×•××›×•×¨ ×¨×›×‘ ×‘×§×œ×•×ª ×•×‘××”×™×¨×•×ª. ××•×“×¢×•×ª ×××•××ª×•×ª ×¢× ××¤×©×¨×•×ª ×™×¦×™×¨×ª ×§×©×¨ ××™×™×“×™×ª.</p>
    <div class="hero-ctas">
      <button class="btn btn-red" onclick="openAdd()" id="hBtn1">ğŸš— ×¤×¨×¡× ×¨×›×‘ ×‘×—×™× ×</button>
      <button class="btn btn-ghost" onclick="scrollTo2('listSec')" id="hBtn2">ğŸ” ×—×¤×© ×¨×›×‘</button>
      <a class="btn-pkg" href="https://yougo-roan.vercel.app" target="_blank">
        <span>ğŸ’¼</span>
        <span id="hBtn3">×—×‘×™×œ×•×ª ×¤×¨×¡×•× ××§×¦×•×¢×™×•×ª</span>
        <span style="font-size:17px">â†</span>
      </a>
    </div>
    <div class="hero-stats">
      <div class="hs"><div class="hs-v" id="statCars">0</div><div class="hs-l" id="statCL">××•×“×¢×•×ª ×¤×¢×™×œ×•×ª</div></div>
      <div class="hs"><div class="hs-v">50K<span class="a">+</span></div><div class="hs-l" id="statFL">×¢×•×§×‘×™×</div></div>
      <div class="hs"><div class="hs-v">100<span class="a">%</span></div><div class="hs-l" id="statFrL">×—×™× × ×œ×¤×¨×¡×</div></div>
    </div>
  </div>
</div>

<!-- TICKER -->
<div class="ticker">
  <div class="ticker-inner">
    <div class="ti">âœ… ×¤×¨×¡×•× ×—×™× ××™ ××™×™×“×™</div>
    <div class="ti">âš¡ ×¤×¨×¡×•× ×‘-60 ×©× ×™×•×ª</div>
    <div class="ti">ğŸ“± ×¤× ×™×™×” ×™×©×™×¨×” ×‘-WhatsApp</div>
    <div class="ti">ğŸ”’ ×××•×‘×˜×— ×•×‘×˜×•×—</div>
    <div class="ti">ğŸŒ ×¢×‘×¨×™×ª Â· Ø¹Ø±Ø¨ÙŠØ© Â· English</div>
    <div class="ti">ğŸš€ YOUGO ISRAEL â€” 50K+ ×¢×•×§×‘×™×</div>
    <div class="ti">ğŸ‘ ××œ×¤×™ ×’×•×œ×©×™× ×™×•××™×™×</div>
    <div class="ti">âœ… ×¤×¨×¡×•× ×—×™× ××™ ××™×™×“×™</div>
    <div class="ti">âš¡ ×¤×¨×¡×•× ×‘-60 ×©× ×™×•×ª</div>
    <div class="ti">ğŸ“± ×¤× ×™×™×” ×™×©×™×¨×” ×‘-WhatsApp</div>
    <div class="ti">ğŸ”’ ×××•×‘×˜×— ×•×‘×˜×•×—</div>
    <div class="ti">ğŸŒ ×¢×‘×¨×™×ª Â· Ø¹Ø±Ø¨ÙŠØ© Â· English</div>
    <div class="ti">ğŸš€ YOUGO ISRAEL â€” 50K+ ×¢×•×§×‘×™×</div>
    <div class="ti">ğŸ‘ ××œ×¤×™ ×’×•×œ×©×™× ×™×•××™×™×</div>
  </div>
</div>

<!-- SEARCH -->
<div class="search-wrap" id="searchSec">
  <div class="search-eyebrow">
    <div class="search-eyebrow-line"></div>
    <span class="search-eyebrow-text">×—×™×¤×•×© ××ª×§×“×</span>
  </div>
  <div class="search-card">
    <div class="search-main">
      <span class="search-ico">ğŸ”</span>
      <input class="search-input" id="sTxt" placeholder="×—×¤×© ×œ×¤×™ ×™×¦×¨×Ÿ, ×“×’×, ×¢×™×¨..." oninput="doFilter()">
      <button class="search-go" onclick="doFilter()" id="sBtn">×—×¤×©</button>
    </div>
    <div class="filter-strip">
      <select class="fc" id="fMake" onchange="doFilter()"><option value="">ğŸš— ×›×œ ×”×™×¦×¨× ×™×</option></select>
      <select class="fc" id="fYear" onchange="doFilter()"><option value="">ğŸ“… ×›×œ ×”×©× ×™×</option></select>
      <select class="fc" id="fPrice" onchange="doFilter()">
        <option value="">ğŸ’° ×›×œ ×”××—×™×¨×™×</option>
        <option value="30000">×¢×“ â‚ª30,000</option>
        <option value="50000">×¢×“ â‚ª50,000</option>
        <option value="80000">×¢×“ â‚ª80,000</option>
        <option value="100000">×¢×“ â‚ª100,000</option>
        <option value="150000">×¢×“ â‚ª150,000</option>
        <option value="200000">×¢×“ â‚ª200,000</option>
      </select>
      <select class="fc" id="fCity" onchange="doFilter()"><option value="">ğŸ“ ×›×œ ×”×¢×¨×™×</option></select>
      <select class="fc" id="fGear" onchange="doFilter()">
        <option value="">ğŸ”„ ×›×œ ×”×’×™×¨×™×</option>
        <option value="××•×˜×•××˜">××•×˜×•××˜</option>
        <option value="×™×“× ×™">×™×“× ×™</option>
        <option value="CVT">CVT</option>
      </select>
      <select class="fc" id="fFuel" onchange="doFilter()">
        <option value="">â›½ ×›×œ ×”×“×œ×§×™×</option>
        <option value="×‘× ×–×™×Ÿ">×‘× ×–×™×Ÿ</option>
        <option value="×“×™×–×œ">×“×™×–×œ</option>
        <option value="×”×™×‘×¨×™×“×™">×”×™×‘×¨×™×“×™</option>
        <option value="×—×©××œ×™">×—×©××œ×™</option>
      </select>
    </div>
  </div>
</div>

<!-- LISTINGS -->
<div class="main" id="listSec">
  <div class="list-head">
    <h2 class="list-title" id="listTitle">××•×“×¢×•×ª <span class="r">×¤×¢×™×œ×•×ª</span></h2>
    <span class="cnt-badge" id="cntBadge">×˜×•×¢×Ÿ...</span>
  </div>
  <div class="sort-row">
    <button class="sort-btn on" onclick="doSort('newest',this)">ğŸ†• ×”×—×“×©×™×</button>
    <button class="sort-btn" onclick="doSort('price_asc',this)">ğŸ’° ××—×™×¨ × ××•×š</button>
    <button class="sort-btn" onclick="doSort('price_desc',this)">ğŸ’ ××—×™×¨ ×’×‘×•×”</button>
    <button class="sort-btn" onclick="doSort('km_asc',this)">ğŸ“ ×§"× × ××•×š</button>
  </div>
  <div id="carsBox">
    <div class="loading-box"><div class="spin"></div><p style="color:var(--t1);font-weight:600">×˜×•×¢×Ÿ ××•×“×¢×•×ª...</p></div>
  </div>
</div>

<!-- FOOTER -->
<footer>
  <div class="foot-in">
    <div class="foot-brand">
      <div class="foot-box">
        <svg width="17" height="17" viewBox="0 0 24 24" fill="none"
             stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M6 8l-1.8 2.35A4 4 0 0 0 3.2 12.87V16H5"/>
          <path d="M18 8H6L4 14h16l-2-6z" fill="rgba(255,255,255,.2)" stroke="#fff" stroke-width="1.6"/>
          <circle cx="7.5" cy="16.5" r="1.5" fill="#fff" stroke="none"/>
          <circle cx="16.5" cy="16.5" r="1.5" fill="#fff" stroke="none"/>
        </svg>
      </div>
      <span class="foot-name"><span class="r">YOUGO</span> ISRAEL</span>
    </div>
    <span class="foot-copy">Â© 2026 YOUGO ISRAEL â€” ×›×œ ×”×–×›×•×™×•×ª ×©××•×¨×•×ª</span>
    <div class="foot-links">
      <a class="foot-link" href="https://yougo-roan.vercel.app" target="_blank">ğŸ’¼ YOUGO ISRAEL</a>
      <a class="foot-link" href="https://wa.me/972546980606" target="_blank">ğŸ’¬ WhatsApp</a>
      <span class="foot-dot" onclick="adminLogin()">â—</span>
    </div>
  </div>
</footer>

<!-- DETAIL MODAL -->
<div class="overlay" id="detailOvl" onclick="if(event.target.id==='detailOvl')closeDetail()">
  <div class="modal" style="max-width:720px" onclick="event.stopPropagation()">
    <div class="modal-head">
      <h3 class="modal-title" id="detailTitle">×¤×¨×˜×™ ×”×¨×›×‘</h3>
      <button class="modal-x" onclick="closeDetail()">Ã—</button>
    </div>
    <div class="modal-body" id="detailBody"></div>
  </div>
</div>

<!-- ADD MODAL â€” redesigned -->
<div class="overlay" id="addOvl" onclick="if(event.target.id==='addOvl')closeAdd()">
  <div class="modal add-modal" onclick="event.stopPropagation()">

    <!-- Header with red gradient -->
    <div class="add-modal-head">
      <div class="add-head-logo">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
          <path d="M18 8H6L4 14h16l-2-6z" fill="rgba(255,255,255,.25)" stroke="#fff" stroke-width="1.8" stroke-linejoin="round"/>
          <circle cx="7.5" cy="16.5" r="2" fill="#fff"/>
          <circle cx="16.5" cy="16.5" r="2" fill="#fff"/>
          <path d="M3 14h18" stroke="#fff" stroke-width="1.6" stroke-linecap="round"/>
          <path d="M5 14v2M19 14v2" stroke="#fff" stroke-width="1.4" stroke-linecap="round"/>
        </svg>
        <div>
          <div class="add-head-title" id="addTitle">×¤×¨×¡× ××ª ×”×¨×›×‘ ×©×œ×š</div>
          <div class="add-head-sub">YOUGO CARS â€” ×—×™× × ×•××™×™×“×™</div>
        </div>
      </div>
      <button class="modal-x" onclick="closeAdd()">Ã—</button>
    </div>

    <!-- Upload zone â€” prominent at top -->
    <div class="add-upload-zone" onclick="document.getElementById('imgIn').click()">
      <input type="file" id="imgIn" multiple accept="image/*" onchange="handleImgs(this)" style="display:none">
      <div class="add-upload-inner" id="uploadInner">
        <div class="add-up-icon">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="rgba(255,255,255,.55)" stroke-width="1.8" stroke-linecap="round">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/>
          </svg>
        </div>
        <div class="add-up-txt" id="upTxt">×”×¢×œ×” ×ª××•× ×•×ª ×”×¨×›×‘ <span>(×¢×“ 10)</span></div>
        <div class="add-up-hint">×œ×—×¥ ×œ×‘×—×™×¨×” Â· ×’×¨×•×¨ ×œ×›××Ÿ</div>
      </div>
      <div class="prev-grid" id="prevGrid"></div>
      <div class="prog" id="prog"><div class="prog-bar" id="progBar"></div></div>
    </div>

    <div class="modal-body add-body-scroll" id="addBody">
      <form id="addForm" onsubmit="submitCar(event)">

        <!-- Config tip â€” shown if upload failed before -->
        <div id="cfgTip" style="display:none;background:rgba(234,179,8,.1);border:1px solid rgba(234,179,8,.35);border-radius:12px;padding:12px 14px;margin-bottom:14px;font-size:12px;color:#fbbf24;line-height:1.6">
          âš™ï¸ <strong>×”×’×“×¨×ª Cloudinary:</strong><br>
          1. ×›× ×¡ ×œ <strong>cloudinary.com â†’ Dashboard</strong> â€” ×”×¢×ª×§ ××ª <strong>Cloud name</strong><br>
          2. ×›× ×¡ ×œ <strong>Settings â†’ Upload â†’ Add preset</strong> â€” ×‘×—×¨ <strong>Unsigned</strong> â€” ×”×¢×ª×§ ××ª ×”×©×<br>
          3. ×¢×“×›×Ÿ ×‘×§×•×“: <code style="background:rgba(0,0,0,.4);padding:1px 5px;border-radius:4px">CL_NAME</code> ×• <code style="background:rgba(0,0,0,.4);padding:1px 5px;border-radius:4px">CL_PRESET</code>
        </div>

        <!-- Section: Car details -->
        <div class="add-section">
          <div class="add-section-title">
            <span class="add-section-dot"></span> ×¤×¨×˜×™ ×”×¨×›×‘
          </div>
          <div class="add-row2">
            <div class="fg-item">
              <label class="fg-label">×™×¦×¨×Ÿ *</label>
              <input class="fg-input" id="f_make" placeholder="Toyota, BMW, Hyundai..." required>
            </div>
            <div class="fg-item">
              <label class="fg-label">×“×’× *</label>
              <input class="fg-input" id="f_model" placeholder="Corolla, X5, i30..." required>
            </div>
          </div>
          <div class="add-row3">
            <div class="fg-item">
              <label class="fg-label">×©× ×” *</label>
              <input class="fg-input" id="f_year" type="number" min="1990" max="2026" placeholder="2021" required>
            </div>
            <div class="fg-item">
              <label class="fg-label">××—×™×¨ â‚ª *</label>
              <input class="fg-input" id="f_price" type="number" placeholder="75,000" required>
            </div>
            <div class="fg-item">
              <label class="fg-label">×§"×</label>
              <input class="fg-input" id="f_mileage" type="number" placeholder="80,000">
            </div>
          </div>
          <div class="add-row3">
            <div class="fg-item">
              <label class="fg-label">×™×“</label>
              <select class="fg-sel" id="f_hand">
                <option value="1">×™×“ 1</option>
                <option value="2" selected>×™×“ 2</option>
                <option value="3">×™×“ 3</option>
                <option value="4">×™×“ 4+</option>
              </select>
            </div>
            <div class="fg-item">
              <label class="fg-label">×’×™×¨</label>
              <select class="fg-sel" id="f_gear">
                <option value="××•×˜×•××˜">××•×˜×•××˜×™</option>
                <option value="×™×“× ×™">×™×“× ×™</option>
                <option value="CVT">CVT</option>
              </select>
            </div>
            <div class="fg-item">
              <label class="fg-label">×“×œ×§</label>
              <select class="fg-sel" id="f_fuel">
                <option value="×‘× ×–×™×Ÿ">×‘× ×–×™×Ÿ</option>
                <option value="×“×™×–×œ">×“×™×–×œ</option>
                <option value="×”×™×‘×¨×™×“×™">×”×™×‘×¨×™×“×™</option>
                <option value="×—×©××œ×™">×—×©××œ×™</option>
              </select>
            </div>
          </div>
          <div class="add-row2">
            <div class="fg-item">
              <label class="fg-label">×¦×‘×¢</label>
              <input class="fg-input" id="f_color" placeholder="×œ×‘×Ÿ / ×©×—×•×¨ / ×›×¡×•×£...">
            </div>
            <div class="fg-item">
              <label class="fg-label">×× ×•×¢ (L)</label>
              <input class="fg-input" id="f_engine" type="number" step="0.1" placeholder="1.6">
            </div>
          </div>
        </div>

        <!-- Section: Description -->
        <div class="add-section">
          <div class="add-section-title">
            <span class="add-section-dot"></span> ×ª×™××•×¨ ×”×¨×›×‘
          </div>
          <div class="fg-item">
            <label class="fg-label">×ª×™××•×¨ ×‘×¢×‘×¨×™×ª</label>
            <textarea class="fg-ta" id="f_desc_he" placeholder="××¦×‘ ×”×¨×›×‘, ×ª×•×¡×¤×•×ª, ×”×™×¡×˜×•×¨×™×™×ª ×ª×—×–×•×§×”..." style="min-height:70px"></textarea>
          </div>
          <div class="fg-item" style="margin-top:8px">
            <label class="fg-label">ÙˆØµÙ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</label>
            <textarea class="fg-ta" id="f_desc_ar" placeholder="ÙˆØµÙ Ø§Ù„Ø³ÙŠØ§Ø±Ø©ØŒ Ø§Ù„Ø¥Ø¶Ø§ÙØ§ØªØŒ Ø§Ù„ØµÙŠØ§Ù†Ø©..." style="min-height:70px"></textarea>
          </div>
        </div>

        <!-- Section: Seller -->
        <div class="add-section add-section-seller">
          <div class="add-section-title">
            <span class="add-section-dot"></span> ×¤×¨×˜×™ ×”××•×›×¨
          </div>
          <div class="add-row2">
            <div class="fg-item">
              <label class="fg-label">×©× ××œ× *</label>
              <input class="fg-input" id="f_name" placeholder="×™×©×¨××œ ×™×©×¨××œ×™" required>
            </div>
            <div class="fg-item">
              <label class="fg-label">×˜×œ×¤×•×Ÿ *</label>
              <input class="fg-input" id="f_phone" type="tel" placeholder="050-000-0000" required>
            </div>
          </div>
          <div class="fg-item">
            <label class="fg-label">×¢×™×¨ *</label>
            <input class="fg-input" id="f_city" placeholder="×ª×œ ××‘×™×‘, ×—×™×¤×”, ×™×¨×•×©×œ×™×..." required>
          </div>
        </div>

        <button type="submit" class="submit-btn" id="subBtn">
          <span class="sub-icon">ğŸš—</span>
          <span id="subBtnTxt">×¤×¨×¡× ××•×“×¢×” ×‘×—×™× × â€” ××™×™×“×™!</span>
        </button>

      </form>
    </div>
  </div>
</div>

<div id="toast"></div>

<script>
// CONFIG
const SB_URL='https://arsbodqhmmtmoqqhykep.supabase.co';
const SB_KEY='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFyc2JvZHFobW10bW9xcWh5a2VwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIxNTgxMTQsImV4cCI6MjA4NzczNDExNH0.mt_WpPshp5xdbIx23pMmcwq7MhktA0-vWPIstOy1_HM';
const sb=supabase.createClient(SB_URL,SB_KEY);
// âš™ï¸ CLOUDINARY CONFIG â€” ×¢×“×›×Ÿ ×›××Ÿ ×× ×™×© ×©×’×™××ª API key
// ×›× ×¡ ×œ: cloudinary.com â†’ Dashboard â†’ Cloud name
// Upload preset: Settings â†’ Upload â†’ Add upload preset (Unsigned)
const CL_NAME='dbd2dgqtl';    // â† Cloud Name ×©×œ×š
const CL_PRESET='htxdjln0';   // â† Upload Preset (Unsigned)
const ADMIN_PW='yougo2026';

// STATE
let all=[],filtered=[],imgs=[],isAdmin=false,lang='he',sort='newest';

// NAV SCROLL
window.addEventListener('scroll',()=>document.getElementById('nav').classList.toggle('solid',scrollY>40),{passive:true});
function scrollTo2(id){document.getElementById(id)?.scrollIntoView({behavior:'smooth'})}

// TRANSLATIONS â€” FIX 4: Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù„ØºØ§Øª Ø¨Ø¯ÙˆÙ† Ø£Ø¹Ù„Ø§Ù…
const LANG_META={
  he:{code:'HE',label:'×¢×‘×¨×™×ª'},
  ar:{code:'AR',label:'Ø¹Ø±Ø¨ÙŠ'},
  en:{code:'EN',label:'English'}
};

const T={
  he:{badge:'YOUGO ISRAEL â€” ×”×¤×œ×˜×¤×•×¨××” ×”××•×‘×™×œ×”',
    h1:'×©×•×§ ×”×¨×›×‘×™× <span class="r">×”×“×™×’×™×˜×œ×™</span><br><span style="color:var(--t0)">×©×œ ×™×©×¨××œ</span>',
    sub:'×§× ×” ×•××›×•×¨ ×¨×›×‘ ×‘×§×œ×•×ª ×•×‘××”×™×¨×•×ª. ××•×“×¢×•×ª ×××•××ª×•×ª ×¢× ××¤×©×¨×•×ª ×™×¦×™×¨×ª ×§×©×¨ ××™×™×“×™×ª.',
    b1:'ğŸš— ×¤×¨×¡× ×¨×›×‘ ×‘×—×™× ×',b2:'ğŸ” ×—×¤×© ×¨×›×‘',b3:'×—×‘×™×œ×•×ª ×¤×¨×¡×•× ××§×¦×•×¢×™×•×ª',
    cL:'××•×“×¢×•×ª ×¤×¢×™×œ×•×ª',fL:'×¢×•×§×‘×™×',frL:'×—×™× × ×œ×¤×¨×¡×',
    lT:'××•×“×¢×•×ª <span class="r">×¤×¢×™×œ×•×ª</span>',
    aT:'ğŸš— ×¤×¨×¡× ××ª ×”×¨×›×‘ ×©×œ×š',sub2:'ğŸš— ×¤×¨×¡× ××•×“×¢×” ×‘×—×™× × â€” ××™×™×“×™!',
    upT:'×œ×—×¥ ×œ×”×•×¡×¤×ª ×ª××•× ×•×ª <strong>(×¢×“ 10)</strong>',
    mk:'ğŸš— ×›×œ ×”×™×¦×¨× ×™×',yr:'ğŸ“… ×›×œ ×”×©× ×™×',pr:'ğŸ’° ×›×œ ×”××—×™×¨×™×',
    ct:'ğŸ“ ×›×œ ×”×¢×¨×™×',gr:'ğŸ”„ ×›×œ ×”×’×™×¨×™×',
    nc:'××™×Ÿ ××•×“×¢×•×ª ×ª×•×××•×ª',ncd:'× ×¡×” ×œ×©× ×•×ª ×¤×¨××˜×¨×™ ×—×™×¤×•×©',
    sold:'× ××›×¨',feat:'××•××œ×¥',nw:'âœ¨ ×—×“×©',
    na:'×¤×¨×¡× ×¨×›×‘',km:'×§"×',wa:'×©×œ×— WhatsApp',cl:'×”×ª×§×©×¨',
    ge:'×’×™×¨',fu:'×“×œ×§',sb2:'×—×¤×©',dir:'rtl'},
  ar:{badge:'YOUGO ISRAEL â€” Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ø±Ø§Ø¦Ø¯Ø©',
    h1:'Ø³ÙˆÙ‚ Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª <span class="r">Ø§Ù„Ø±Ù‚Ù…ÙŠ</span><br><span style="color:var(--t0)">ÙÙŠ Ø¥Ø³Ø±Ø§Ø¦ÙŠÙ„</span>',
    sub:'Ø§Ø´ØªØ±Ù ÙˆØ¨ÙØ¹ Ø³ÙŠØ§Ø±ØªÙƒ Ø¨Ø³Ù‡ÙˆÙ„Ø© ÙˆØ³Ø±Ø¹Ø©. Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ù…ÙˆØ«Ù‚Ø© Ù…Ø¹ ØªÙˆØ§ØµÙ„ ÙÙˆØ±ÙŠ.',
    b1:'ğŸš— Ø£Ø¹Ù„Ù† Ù…Ø¬Ø§Ù†Ø§Ù‹',b2:'ğŸ” ØªØµÙØ­',b3:'Ø¨Ø§Ù‚Ø§Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†',
    cL:'Ø¥Ø¹Ù„Ø§Ù† Ù†Ø´Ø·',fL:'Ù…ØªØ§Ø¨Ø¹',frL:'Ù†Ø´Ø± Ù…Ø¬Ø§Ù†ÙŠ',
    lT:'Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª <span class="r">Ø§Ù„Ù†Ø´Ø·Ø©</span>',
    aT:'ğŸš— Ø£Ø¶Ù Ø¥Ø¹Ù„Ø§Ù†Ùƒ',sub2:'ğŸš— Ø§Ù†Ø´Ø± Ø§Ù„Ø¢Ù† â€” Ù…Ø¬Ø§Ù†Ø§Ù‹!',
    upT:'Ø§Ù†Ù‚Ø± Ù„Ø¥Ø¶Ø§ÙØ© ØµÙˆØ± <strong>(Ø­ØªÙ‰ 10)</strong>',
    mk:'ğŸš— ÙƒÙ„ Ø§Ù„Ù…Ø§Ø±ÙƒØ§Øª',yr:'ğŸ“… ÙƒÙ„ Ø§Ù„Ø³Ù†ÙˆØ§Øª',pr:'ğŸ’° ÙƒÙ„ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±',
    ct:'ğŸ“ ÙƒÙ„ Ø§Ù„Ù…Ø¯Ù†',gr:'ğŸ”„ ÙƒÙ„ Ø§Ù„Ù†Ø§Ù‚Ù„Ø§Øª',
    nc:'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø¹Ù„Ø§Ù†Ø§Øª',ncd:'Ø¬Ø±Ù‘Ø¨ ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ø¹Ø§ÙŠÙŠØ±',
    sold:'Ù…Ø¨Ø§Ø¹',feat:'Ù…Ù…ÙŠØ²',nw:'âœ¨ Ø¬Ø¯ÙŠØ¯',
    na:'Ø£Ø¹Ù„Ù† Ø¹Ù† Ø³ÙŠØ§Ø±ØªÙƒ',km:'ÙƒÙ…',wa:'ÙˆØ§ØªØ³Ø§Ø¨',cl:'Ø§ØªØµÙ„',
    ge:'Ù†Ø§Ù‚Ù„',fu:'ÙˆÙ‚ÙˆØ¯',sb2:'Ø¨Ø­Ø«',dir:'rtl'},
  en:{badge:'YOUGO ISRAEL â€” The Leading Platform',
    h1:'Israel\'s <span class="r">Digital</span><br><span style="color:var(--t0)">Car Market</span>',
    sub:'Buy and sell cars easily. Verified listings with instant contact.',
    b1:'ğŸš— Post Free',b2:'ğŸ” Browse',b3:'Professional Packages',
    cL:'Active Listings',fL:'Followers',frL:'Free to Post',
    lT:'<span class="r">Active</span> Listings',
    aT:'ğŸš— Post Your Car',sub2:'ğŸš— Post Now â€” Free!',
    upT:'Click to add photos <strong>(up to 10)</strong>',
    mk:'ğŸš— All Makes',yr:'ğŸ“… All Years',pr:'ğŸ’° All Prices',
    ct:'ğŸ“ All Cities',gr:'ğŸ”„ All Gears',
    nc:'No listings found',ncd:'Try changing filters',
    sold:'Sold',feat:'Featured',nw:'âœ¨ New',
    na:'Post Car',km:'km',wa:'WhatsApp',cl:'Call',
    ge:'Gear',fu:'Fuel',sb2:'Search',dir:'ltr'}
};
const t=k=>T[lang]?.[k]||T.he[k]||k;

function cycleLang(){const l=['he','ar','en'];lang=l[(l.indexOf(lang)+1)%3];applyLang()}

function applyLang(){
  const L=T[lang],M=LANG_META[lang];
  document.documentElement.lang=lang;document.documentElement.dir=L.dir;
  // FIX 4: ØªØ­Ø¯ÙŠØ« Ø²Ø± Ø§Ù„Ù„ØºØ© Ø¨Ø¯ÙˆÙ† Ø£Ø¹Ù„Ø§Ù…
  document.getElementById('langIco').textContent=M.code;
  document.getElementById('langTxt').textContent=M.label;
  document.getElementById('heroBadge').textContent=L.badge;
  document.getElementById('heroH').innerHTML=L.h1;
  document.getElementById('heroSub').textContent=L.sub;
  document.getElementById('hBtn1').textContent=L.b1;
  document.getElementById('hBtn2').textContent=L.b2;
  document.getElementById('hBtn3').textContent=L.b3;
  document.getElementById('navTxt').textContent=L.na;
  document.getElementById('statCL').textContent=L.cL;
  document.getElementById('statFL').textContent=L.fL;
  document.getElementById('statFrL').textContent=L.frL;
  document.getElementById('listTitle').innerHTML=L.lT;
  document.getElementById('addTitle').textContent=L.aT;
  const sb2El=document.getElementById('subBtnTxt');if(sb2El)sb2El.textContent=L.sub2;
  document.getElementById('upTxt').innerHTML=L.upT;
  document.getElementById('sBtn').textContent=L.sb2;
  document.getElementById('fMake').options[0].text=L.mk;
  document.getElementById('fYear').options[0].text=L.yr;
  document.getElementById('fPrice').options[0].text=L.pr;
  document.getElementById('fCity').options[0].text=L.ct;
  document.getElementById('fGear').options[0].text=L.gr;
  renderCars(filtered);
}

// LOAD
async function loadCars(){
  document.getElementById('carsBox').innerHTML='<div class="loading-box"><div class="spin"></div><p style="color:var(--t1);font-weight:600">×˜×•×¢×Ÿ ××•×“×¢×•×ª...</p></div>';
  try{
    const q=isAdmin
      ?sb.from('cars').select('*').order('created_at',{ascending:false})
      :sb.from('cars').select('*').eq('status','active').order('created_at',{ascending:false});
    const{data,error}=await q;if(error)throw error;
    all=data||[];filtered=[...all];
    buildFilters();doSort(sort);
    document.getElementById('statCars').textContent=all.filter(c=>c.status==='active').length;
  }catch(e){
    document.getElementById('carsBox').innerHTML=`<div class="empty-box"><div class="empty-ico">âš ï¸</div><h3>×©×’×™××”</h3><p>${e.message}</p><button class="btn btn-red" style="margin-top:14px" onclick="loadCars()">× ×¡×” ×©×•×‘</button></div>`;
  }
}

function buildFilters(){
  const makes=[...new Set(all.map(c=>c.make).filter(Boolean))].sort();
  const years=[...new Set(all.map(c=>c.year).filter(Boolean))].sort((a,b)=>b-a);
  const cities=[...new Set(all.map(c=>c.seller_city).filter(Boolean))].sort();
  const mk=document.getElementById('fMake'),yr=document.getElementById('fYear'),ct=document.getElementById('fCity');
  const[cm,cy,cc]=[mk.value,yr.value,ct.value];
  while(mk.options.length>1)mk.remove(1);
  while(yr.options.length>1)yr.remove(1);
  while(ct.options.length>1)ct.remove(1);
  makes.forEach(m=>mk.add(new Option(m,m)));
  years.forEach(y=>yr.add(new Option(y,y)));
  cities.forEach(c=>ct.add(new Option(c,c)));
  mk.value=cm;yr.value=cy;ct.value=cc;
}

function doFilter(){
  const tx=document.getElementById('sTxt').value.toLowerCase();
  const mk=document.getElementById('fMake').value,yr=document.getElementById('fYear').value;
  const pr=document.getElementById('fPrice').value,ct=document.getElementById('fCity').value;
  const gr=document.getElementById('fGear').value,fu=document.getElementById('fFuel').value;
  filtered=all.filter(c=>{
    if(tx&&!`${c.make} ${c.model} ${c.seller_city} ${c.color}`.toLowerCase().includes(tx))return false;
    if(mk&&c.make!==mk)return false;
    if(yr&&c.year!=yr)return false;
    if(pr&&c.price>parseInt(pr))return false;
    if(ct&&c.seller_city!==ct)return false;
    if(gr&&c.gear_type!==gr)return false;
    if(fu&&c.fuel_type!==fu)return false;
    return true;
  });
  doSort(sort);
}

function doSort(type,btn){
  sort=type;
  if(btn){document.querySelectorAll('.sort-btn').forEach(b=>b.classList.remove('on'));btn.classList.add('on')}
  const s=[...filtered];
  if(type==='price_asc')s.sort((a,b)=>a.price-b.price);
  else if(type==='price_desc')s.sort((a,b)=>b.price-a.price);
  else if(type==='km_asc')s.sort((a,b)=>(a.mileage||999999)-(b.mileage||999999));
  else s.sort((a,b)=>new Date(b.created_at)-new Date(a.created_at));
  renderCars(s);
  document.getElementById('cntBadge').textContent=filtered.length+' ××•×“×¢×•×ª';
}

function renderCars(cars){
  const c=document.getElementById('carsBox');
  if(!cars.length){
    c.innerHTML=`<div class="empty-box"><div class="empty-ico">ğŸ”</div><h3>${t('nc')}</h3><p>${t('ncd')}</p></div>`;
    return;
  }
  c.innerHTML=`<div class="cars-grid">${cars.map(carCard).join('')}</div>`;
}

function carCard(car){
  const is=car.images||[],im=car.main_image||is[0];
  const imgH=im?`<img class="car-img" src="${im}" alt="${car.make} ${car.model}" loading="lazy" onerror="this.style.display='none';this.parentElement.querySelector('.car-placeholder').style.display='flex'">`:'';
  const ph=`<div class="car-placeholder" style="${im?'display:none':''}">ğŸš—</div>`;
  const badges=[];
  if(car.featured)badges.push(`<span class="cbadge cb-feat">â­ ${t('feat')}</span>`);
  if(car.status==='sold')badges.push(`<span class="cbadge cb-sold">âœ“ ${t('sold')}</span>`);
  if((Date.now()-new Date(car.created_at))<86400000*3&&car.status!=='sold')badges.push(`<span class="cbadge cb-new">${t('nw')}</span>`);
  const ph2=(car.seller_phone||'').replace(/\D/g,'').replace(/^0/,'');
  const adminRow=isAdmin?`<div class="admin-row">
    ${car.status==='pending'?`<button class="a-btn a-approve" onclick="approve('${car.id}');event.stopPropagation()">âœ“ ××©×¨</button>`:''}
    ${car.status==='active'?`<button class="a-btn a-sold" onclick="markSold('${car.id}');event.stopPropagation()">ğŸ’° × ××›×¨</button>`:''}
    <button class="a-btn a-del" onclick="delCar('${car.id}');event.stopPropagation()">âœ•</button>
  </div>`:'';
  return`<div class="car-card" onclick="openDetail('${car.id}')">
    <div class="car-img-wrap">${ph}${imgH}<div class="car-badges">${badges.join('')}</div>${is.length>1?`<div class="car-cnt">ğŸ“· ${is.length}</div>`:''}</div>
    ${car.status==='pending'&&isAdmin?'<div class="pend-bar">â³ ×××ª×™×Ÿ ×œ××™×©×•×¨</div>':''}
    <div class="car-body">
      <div class="car-name">${car.make} ${car.model}</div>
      <div class="car-meta">${car.year} Â· ${car.seller_city}</div>
      <div class="car-price">â‚ª${Number(car.price).toLocaleString()}</div>
      <div class="specs">
        <span class="spec">ğŸ”„ ${car.gear_type||'â€”'}</span>
        <span class="spec">â›½ ${car.fuel_type||'â€”'}</span>
        ${car.mileage?`<span class="spec">ğŸ“ ${Number(car.mileage).toLocaleString()} ${t('km')}</span>`:''}
        ${car.hand?`<span class="spec">âœ‹ ×™×“ ${car.hand}</span>`:''}
      </div>
      <div class="car-foot">
        <span class="car-loc">ğŸ“ ${car.seller_city}</span>
        <div class="car-acts" onclick="event.stopPropagation()">
          <a class="act act-wa" href="https://wa.me/972${ph2}" target="_blank">ğŸ’¬</a>
          <a class="act act-call" href="tel:${car.seller_phone}">ğŸ“</a>
        </div>
      </div>
    </div>
    ${adminRow}
  </div>`;
}

// DETAIL
function openDetail(id){
  const car=all.find(c=>c.id===id);if(!car)return;
  const is=car.images?.length?car.images:(car.main_image?[car.main_image]:[]);
  const ph2=(car.seller_phone||'').replace(/\D/g,'').replace(/^0/,'');
  document.getElementById('detailTitle').textContent=`${car.make} ${car.model} ${car.year}`;
  document.getElementById('detailBody').innerHTML=`
    ${is[0]?`<div class="d-gal">
      <img class="d-main-img" id="dmImg" src="${is[0]}" alt="">
      ${is.length>1?`<div class="d-thumbs">${is.map((s,i)=>`<img class="d-thumb ${i===0?'on':''}" src="${s}" onclick="switchImg('${s}',this)" loading="lazy">`).join('')}</div>`:''}
    </div>`:''}
    <div class="d-hrow">
      <div><div class="d-name">${car.make} ${car.model}</div><div class="d-sub">${car.year} Â· ×™×“ ${car.hand||'â€”'} Â· ${car.seller_city}</div></div>
      <div><div class="d-price">â‚ª${Number(car.price).toLocaleString()}</div><div class="d-price-lbl">××—×™×¨ ××‘×•×§×©</div></div>
    </div>
    <div class="d-specs">
      ${car.mileage?`<div class="d-spec"><div class="d-spec-v">ğŸ“ ${Number(car.mileage).toLocaleString()}</div><div class="d-spec-k">${t('km')}</div></div>`:''}
      <div class="d-spec"><div class="d-spec-v">ğŸ”„ ${car.gear_type||'â€”'}</div><div class="d-spec-k">${t('ge')}</div></div>
      <div class="d-spec"><div class="d-spec-v">â›½ ${car.fuel_type||'â€”'}</div><div class="d-spec-k">${t('fu')}</div></div>
      ${car.color?`<div class="d-spec"><div class="d-spec-v">ğŸ¨ ${car.color}</div><div class="d-spec-k">×¦×‘×¢</div></div>`:''}
      ${car.engine_size?`<div class="d-spec"><div class="d-spec-v">ğŸ”§ ${car.engine_size}L</div><div class="d-spec-k">×× ×•×¢</div></div>`:''}
      <div class="d-spec"><div class="d-spec-v">âœ‹ ×™×“ ${car.hand||'â€”'}</div><div class="d-spec-k">×™×“</div></div>
    </div>
    ${car.description_he?`<div class="d-desc">${car.description_he}</div>`:''}
    <div class="seller-row"><div class="seller-av">ğŸ‘¤</div>
      <div><div class="seller-name">${car.seller_name||'â€”'}</div><div class="seller-city">ğŸ“ ${car.seller_city||'â€”'}</div></div>
    </div>
    <div class="cta-row">
      <a class="cta-wa" href="https://wa.me/972${ph2}" target="_blank">ğŸ’¬ ${t('wa')}</a>
      <a class="cta-call" href="tel:${car.seller_phone}">ğŸ“ ${t('cl')} ${car.seller_phone}</a>
    </div>
    ${isAdmin?`<div style="display:flex;gap:8px;margin-top:12px">
      ${car.status==='pending'?`<button onclick="approve('${car.id}');closeDetail()" style="flex:1;padding:12px;background:rgba(74,222,128,.1);border:1px solid rgba(74,222,128,.28);color:#4ade80;border-radius:12px;cursor:pointer;font-size:13.5px;font-weight:900;font-family:var(--font)">âœ“ ××©×¨</button>`:''}
      <button onclick="delCar('${car.id}');closeDetail()" style="flex:1;padding:12px;background:rgba(239,68,68,.1);border:1px solid rgba(239,68,68,.28);color:#ef4444;border-radius:12px;cursor:pointer;font-size:13.5px;font-weight:900;font-family:var(--font)">ğŸ—‘ ××—×§</button>
    </div>`:''}`;
  document.getElementById('detailOvl').classList.add('open');
}
function switchImg(src,el){document.getElementById('dmImg').src=src;document.querySelectorAll('.d-thumb').forEach(t=>t.classList.remove('on'));el.classList.add('on')}
function closeDetail(){document.getElementById('detailOvl').classList.remove('open')}

// ADD
function openAdd(){
  document.getElementById('addOvl').classList.add('open');
  document.getElementById('addForm').reset();
  document.getElementById('prevGrid').innerHTML='';
  imgs=[];
  const inner=document.getElementById('uploadInner');
  if(inner)inner.style.display='flex';
  const errBox=document.getElementById('formErrBox');
  if(errBox)errBox.remove();
  // Keep cfg tip if it was shown before
}
function closeAdd(){document.getElementById('addOvl').classList.remove('open')}

function handleImgs(input){
  const files=[...input.files].slice(0,10);imgs=files;
  const pg=document.getElementById('prevGrid');pg.innerHTML='';
  // Update upload zone appearance
  const inner=document.getElementById('uploadInner');
  if(inner) inner.style.display=files.length>0?'none':'flex';
  files.forEach((f,i)=>{
    const r=new FileReader();
    r.onload=e=>{
      const d=document.createElement('div');
      d.className='prev-wrap';
      d.innerHTML=`<img src="${e.target.result}" class="prev-img"><button class="prev-rm" onclick="rmImg(${i});event.stopPropagation()" type="button">Ã—</button>`;
      pg.appendChild(d);
    };
    r.readAsDataURL(f);
  });
}
function rmImg(i){imgs.splice(i,1);const dt=new DataTransfer();imgs.forEach(f=>dt.items.add(f));document.getElementById('imgIn').files=dt.files;handleImgs(document.getElementById('imgIn'))}

async function uploadImg(file){
  try{
    const fd=new FormData();
    fd.append('file',file);
    fd.append('upload_preset',CL_PRESET);
    fd.append('folder','yougo-cars');
    const r=await fetch(`https://api.cloudinary.com/v1_1/${CL_NAME}/image/upload`,{method:'POST',body:fd});
    const json=await r.json();
    if(!r.ok||json.error){
      const msg=json.error?.message||'HTTP '+r.status;
      // Show config hint
      if(msg.toLowerCase().includes('unknown api key')||msg.toLowerCase().includes('invalid')){
        const tip=document.getElementById('cfgTip');if(tip)tip.style.display='block';
        throw new Error(`Cloudinary config ×©×’×•×™ â€” ×‘×“×•×§ Cloud Name ×•-Upload Preset`);
      }
      throw new Error('×”×¢×œ××ª ×ª××•× ×” × ×›×©×œ×”: '+msg);
    }
    return json.secure_url;
  }catch(e){
    if(e.message.startsWith('Cloudinary')||e.message.startsWith('×”×¢×œ××ª')) throw e;
    throw new Error('×©×’×™××ª ×¨×©×ª ×‘×”×¢×œ××ª ×ª××•× ×”');
  }
}

function getErrMsg(err){
  if(!err) return '×©×’×™××” ×œ× ×™×“×•×¢×”';
  if(typeof err==='string') return err;
  // Supabase error object
  if(err.message) return err.message;
  if(err.details) return err.details;
  if(err.hint) return err.hint;
  if(err.code) return '×§×•×“: '+err.code;
  try{ return JSON.stringify(err); }catch(e){ return '×©×’×™××” ×œ× ×™×“×•×¢×”'; }
}

function showErrInForm(msg){
  let box=document.getElementById('formErrBox');
  if(!box){
    box=document.createElement('div');
    box.id='formErrBox';
    box.style.cssText='background:rgba(239,68,68,.12);border:1px solid rgba(239,68,68,.4);color:#fca5a5;border-radius:12px;padding:14px 16px;font-size:13px;font-weight:700;margin-top:12px;line-height:1.5;word-break:break-word;';
    document.getElementById('subBtn').after(box);
  }
  box.innerHTML='âŒ '+msg;
  box.scrollIntoView({behavior:'smooth',block:'nearest'});
}

async function submitCar(e){
  e.preventDefault();
  const btn=document.getElementById('subBtn'),pg=document.getElementById('prog'),pb=document.getElementById('progBar');
  // Clear previous error
  const prevErr=document.getElementById('formErrBox');if(prevErr)prevErr.remove();
  btn.disabled=true;btn.textContent='â³ ××¢×œ×”...';
  if(imgs.length)pg.style.display='block';
  try{
    // STEP 1: Upload images (optional â€” saves without images if upload fails)
    const urls=[];
    if(imgs.length>0){
      for(let i=0;i<imgs.length;i++){
        btn.textContent=`ğŸ“· ××¢×œ×” ×ª××•× ×” ${i+1} ××ª×•×š ${imgs.length}...`;
        pb.style.width=`${Math.round(((i+1)/imgs.length)*100)}%`;
        try{
          urls.push(await uploadImg(imgs[i]));
        }catch(imgErr){
          // If ALL images fail show error, else continue with uploaded ones
          if(i===0&&imgs.length>0){
            throw imgErr; // First image failed = config problem, stop
          }
          console.warn('[YOUGO] Image',i,'failed:',imgErr.message);
        }
      }
    }
    pg.style.display='none';

    // STEP 2: Validate required fields
    const make=document.getElementById('f_make').value.trim();
    const model=document.getElementById('f_model').value.trim();
    const year=parseInt(document.getElementById('f_year').value);
    const price=parseInt(document.getElementById('f_price').value);
    const sellerName=document.getElementById('f_name').value.trim();
    const sellerPhone=document.getElementById('f_phone').value.trim();
    const sellerCity=document.getElementById('f_city').value.trim();
    if(!make||!model||!year||!price||!sellerName||!sellerPhone||!sellerCity){
      throw new Error('×× × ××œ× ××ª ×›×œ ×©×“×•×ª ×”×—×•×‘×” (*)');
    }

    btn.textContent='ğŸ’¾ ×©×•××¨ ×‘××¡×“ × ×ª×•× ×™×...';

    // STEP 3: Insert to Supabase
    const payload={
      make,model,year,price,
      mileage:parseInt(document.getElementById('f_mileage').value)||0,
      hand:parseInt(document.getElementById('f_hand').value)||2,
      gear_type:document.getElementById('f_gear').value,
      fuel_type:document.getElementById('f_fuel').value,
      color:document.getElementById('f_color').value.trim()||null,
      engine_size:parseFloat(document.getElementById('f_engine').value)||null,
      description_he:document.getElementById('f_desc_he').value||null,
      description_ar:document.getElementById('f_desc_ar').value||null,
      seller_name:sellerName,
      seller_phone:sellerPhone,
      seller_city:sellerCity,
      images:urls,
      main_image:urls[0]||null,
      status:'active'
    };

    console.log('[YOUGO] Inserting:', payload);
    const{data,error}=await sb.from('cars').insert(payload).select();
    console.log('[YOUGO] Result:', {data,error});

    if(error){
      throw new Error(getErrMsg(error));
    }

    // SUCCESS
    await loadCars();
    document.getElementById('addBody').innerHTML=`
      <div class="success-wrap" style="text-align:center;padding:40px 20px">
        <div style="font-size:56px;margin-bottom:16px">ğŸ‰</div>
        <h3 style="font-size:1.5rem;font-weight:900;margin-bottom:10px;color:#fff">×”××•×“×¢×” ×¤×•×¨×¡××”!</h3>
        <p style="color:rgba(255,255,255,.7);font-size:14px;margin-bottom:24px">×”×¨×›×‘ ×©×œ×š ×–××™×Ÿ ×¢×›×©×™×• ×œ×›×•×œ× ğŸš—âœ¨</p>
        <button class="btn btn-red" style="padding:14px 36px;font-size:15px"
          onclick="closeAdd();document.getElementById('addBody').innerHTML=''">×¡×’×•×¨</button>
      </div>`;
    showToast('ğŸš— ×”××•×“×¢×” ×¤×•×¨×¡××” ×‘×”×¦×œ×—×”!','ok');

  }catch(err){
    const msg=getErrMsg(err);
    console.error('[YOUGO] Submit error:',err);
    showErrInForm(msg);
    showToast('âŒ '+msg.slice(0,60),'err');
    btn.disabled=false;
    btn.textContent='ğŸš— ×¤×¨×¡× ××•×“×¢×” ×‘×—×™× × â€” ××™×™×“×™!';
    pg.style.display='none';
    pb.style.width='0%';
  }
}

// ADMIN
function adminLogin(){
  const p=prompt('ğŸ”‘ Admin Password:');if(p===null)return;
  if(p===ADMIN_PW){
    isAdmin=true;
    document.getElementById('adminBar').classList.add('show');
    document.getElementById('heroSec').style.marginTop='0';
    document.getElementById('adminActs').innerHTML=`
      <span style="color:var(--t1);font-size:12.5px;font-weight:600">Admin Mode</span>
      <button onclick="loadCars()" style="background:rgba(200,16,46,.12);border:1px solid var(--bred);color:var(--red);padding:6px 14px;border-radius:8px;cursor:pointer;font-size:12px;font-weight:900;font-family:var(--font)">ğŸ”„ ×¨×¢× ×Ÿ</button>
      <a href="admin.html" style="background:rgba(59,130,246,.12);border:1px solid rgba(59,130,246,.3);color:#60a5fa;padding:6px 14px;border-radius:8px;font-size:12px;font-weight:900;font-family:var(--font);text-decoration:none">âš™ï¸ ×œ×•×— × ×™×”×•×œ</a>
      <button onclick="adminOut()" style="background:var(--bg3);border:1px solid var(--b0);color:var(--t1);padding:6px 14px;border-radius:8px;cursor:pointer;font-size:12px;font-family:var(--font)">×™×¦×™××”</button>`;
    loadCars();showToast('âœ… Admin Mode','ok');
  }else showToast('âŒ ×¡×™×¡××” ×©×’×•×™×”','err');
}
function adminOut(){isAdmin=false;document.getElementById('adminBar').classList.remove('show');document.getElementById('heroSec').style.marginTop='';loadCars()}
async function approve(id){const{error}=await sb.from('cars').update({status:'active'}).eq('id',id);if(!error){showToast('âœ… ××•×©×¨×”','ok');loadCars()}else showToast('âŒ '+error.message,'err')}
async function markSold(id){const{error}=await sb.from('cars').update({status:'sold'}).eq('id',id);if(!error){showToast('âœ… × ××›×¨','ok');loadCars()}}
async function delCar(id){if(!confirm('×œ××—×•×§ ×œ×¦××™×ª×•×ª?'))return;const{error}=await sb.from('cars').delete().eq('id',id);if(!error){showToast('ğŸ—‘ï¸ × ××—×§×”','ok');loadCars()}else showToast('âŒ '+error.message,'err')}

function showToast(msg,type='ok'){const el=document.getElementById('toast');el.textContent=msg;el.className=`show ${type}`;clearTimeout(el._t);el._t=setTimeout(()=>el.className='',3400)}
function showHome(){filtered=[...all];doSort(sort);window.scrollTo({top:0,behavior:'smooth'})}

document.addEventListener('keydown',e=>{if(e.key==='Escape'){closeDetail();closeAdd()}});
loadCars();
</script>
</body>
</html>
