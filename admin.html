<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>YOUGO Admin</title>
<link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;700;800;900&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
:root{
  --red:#c8102e;--gold:#d4af37;--blue:#3b82f6;--orange:#ea580c;--green:#22c55e;
  --bg:#05050a;--bg2:#0a0a12;--bg3:#0f0f18;--card:#0d0d16;
  --border:rgba(255,255,255,0.07);--text:#eeeef5;
  --text2:rgba(238,238,245,0.5);--text3:rgba(238,238,245,0.25);
  --font:'Heebo',sans-serif;
}
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:var(--font);background:var(--bg);color:var(--text);min-height:100vh;}
::-webkit-scrollbar{width:4px;}::-webkit-scrollbar-thumb{background:var(--red);border-radius:2px;}

/* LOGIN */
#loginPage{min-height:100vh;display:flex;align-items:center;justify-content:center;background:radial-gradient(ellipse 70% 50% at 50% 0%,rgba(200,16,46,0.15),transparent 65%),var(--bg);}
.login-box{background:var(--bg2);border:1px solid var(--border);border-radius:24px;padding:40px;width:100%;max-width:360px;text-align:center;}
.l-logo{font-size:48px;margin-bottom:16px;}
.l-title{font-size:22px;font-weight:900;margin-bottom:4px;}
.l-sub{font-size:13px;color:var(--text2);margin-bottom:26px;}
.l-inp{width:100%;background:var(--bg3);border:1px solid var(--border);color:white;padding:13px;border-radius:12px;font-family:var(--font);font-size:15px;outline:none;text-align:center;letter-spacing:0.2em;margin-bottom:12px;transition:border-color 0.2s;}
.l-inp:focus{border-color:var(--red);}
.l-btn{width:100%;padding:13px;border-radius:12px;background:var(--red);color:white;border:none;font-family:var(--font);font-size:15px;font-weight:800;cursor:pointer;}
.l-btn:hover{background:#a50d25;}
.l-err{color:#ef4444;font-size:12px;margin-top:8px;}

/* MAIN */
#mainPage{display:none;}
nav{height:58px;padding:0 20px;display:flex;align-items:center;justify-content:space-between;background:var(--bg2);border-bottom:1px solid var(--border);position:sticky;top:0;z-index:10;}
.nav-title{font-size:15px;font-weight:900;}
.nav-title span{color:var(--red);}
.nav-acts{display:flex;gap:8px;}
.btn{display:inline-flex;align-items:center;gap:5px;padding:7px 14px;border-radius:9px;font-family:var(--font);font-weight:700;font-size:13px;cursor:pointer;border:none;transition:all 0.2s;text-decoration:none;}
.btn-red{background:var(--red);color:white;}
.btn-ghost{background:var(--bg3);border:1px solid var(--border);color:var(--text2);}
.btn-ghost:hover{color:white;}

/* STATS */
.stats{display:flex;gap:10px;padding:16px 20px;flex-wrap:wrap;border-bottom:1px solid var(--border);}
.stat{flex:1;min-width:90px;background:var(--card);border:1px solid var(--border);border-radius:12px;padding:12px 14px;}
.stat-v{font-size:24px;font-weight:900;}
.stat-l{font-size:10px;color:var(--text3);margin-top:2px;}

/* CONTENT */
.content{max-width:900px;margin:0 auto;padding:24px 20px;}

/* PACKAGE SELECTOR */
.pkg-selector{display:grid;grid-template-columns:repeat(5,1fr);gap:8px;margin-bottom:16px;}
.pkg-opt{
  padding:10px 6px;border-radius:12px;border:2px solid var(--border);
  text-align:center;cursor:pointer;transition:all 0.2s;font-family:var(--font);
  background:var(--bg3);
}
.pkg-opt .pkg-icon{font-size:20px;margin-bottom:4px;}
.pkg-opt .pkg-name{font-size:11px;font-weight:800;color:var(--text2);}
.pkg-opt .pkg-price{font-size:10px;color:var(--text3);margin-top:2px;}
.pkg-opt:hover{border-color:rgba(255,255,255,0.2);}
.pkg-opt.sel-basic{border-color:var(--red);background:rgba(200,16,46,0.08);}
.pkg-opt.sel-basic .pkg-name{color:var(--red);}
.pkg-opt.sel-pro{border-color:var(--red);background:rgba(200,16,46,0.12);box-shadow:0 0 20px rgba(200,16,46,0.15);}
.pkg-opt.sel-pro .pkg-name{color:#ff6080;}
.pkg-opt.sel-vip{border-color:var(--gold);background:rgba(212,175,55,0.1);box-shadow:0 0 24px rgba(212,175,55,0.15);}
.pkg-opt.sel-vip .pkg-name{color:var(--gold);}
.pkg-opt.sel-biz{border-color:var(--blue);background:rgba(59,130,246,0.08);}
.pkg-opt.sel-biz .pkg-name{color:#60a5fa;}
.pkg-opt.sel-equip{border-color:var(--orange);background:rgba(234,88,12,0.08);}
.pkg-opt.sel-equip .pkg-name{color:#fb923c;}

/* FORM */
.form-card{background:var(--bg2);border:1px solid var(--border);border-radius:18px;padding:24px;margin-bottom:28px;}
.fc-title{font-size:16px;font-weight:800;margin-bottom:18px;}
.form-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;}
.fg{display:flex;flex-direction:column;gap:5px;}
.fg.full{grid-column:1/-1;}
.lbl{font-size:12px;font-weight:700;color:var(--text2);}
.inp,.sel,.ta{background:var(--bg3);border:1px solid var(--border);color:white;padding:10px 13px;border-radius:10px;font-family:var(--font);font-size:14px;outline:none;transition:border-color 0.2s;width:100%;}
.inp:focus,.sel:focus,.ta:focus{border-color:var(--red);}
.ta{resize:vertical;min-height:70px;}
.inp.ltr{direction:ltr;text-align:left;}
.hint{font-size:11px;color:var(--text3);margin-top:3px;}
.divider{font-size:11px;font-weight:800;color:var(--red);text-transform:uppercase;letter-spacing:0.15em;padding-bottom:8px;border-bottom:1px solid rgba(200,16,46,0.2);margin:16px 0 14px;}
.submit-btn{width:100%;padding:14px;border-radius:12px;background:var(--red);color:white;border:none;font-family:var(--font);font-size:15px;font-weight:800;cursor:pointer;margin-top:16px;transition:background 0.2s;}
.submit-btn:hover:not(:disabled){background:#a50d25;}
.submit-btn:disabled{opacity:0.5;cursor:not-allowed;}

/* LIST */
.list-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px;}
.list-title{font-size:16px;font-weight:800;}
.posts-list{display:flex;flex-direction:column;gap:10px;}
.post-row{
  background:var(--card);border:1px solid var(--border);
  border-radius:14px;padding:14px 16px;
  display:flex;align-items:center;gap:12px;transition:border-color 0.2s;
}
.post-row:hover{border-color:rgba(255,255,255,0.12);}

/* Package color stripe */
.post-row.pkg-basic{border-right:3px solid var(--red);}
.post-row.pkg-pro{border-right:3px solid #ff4060;box-shadow:inset 3px 0 12px rgba(200,16,46,0.08);}
.post-row.pkg-vip{border-right:3px solid var(--gold);box-shadow:inset 3px 0 16px rgba(212,175,55,0.06);}
.post-row.pkg-biz{border-right:3px solid var(--blue);}
.post-row.pkg-equip{border-right:3px solid var(--orange);}

.post-thumb{width:68px;height:68px;border-radius:10px;object-fit:cover;background:var(--bg3);flex-shrink:0;display:flex;align-items:center;justify-content:center;font-size:28px;}
.post-info{flex:1;min-width:0;}
.post-name{font-size:14px;font-weight:800;margin-bottom:2px;}
.post-price-sm{font-size:13px;font-weight:700;color:var(--red);}
.post-vip .post-price-sm{color:var(--gold);}
.post-meta{font-size:10px;color:var(--text3);margin-top:3px;display:flex;gap:8px;flex-wrap:wrap;}
.pkg-pill{display:inline-flex;align-items:center;gap:3px;padding:2px 8px;border-radius:100px;font-size:10px;font-weight:800;}
.pp-basic{background:rgba(200,16,46,0.12);color:var(--red);}
.pp-pro{background:rgba(200,16,46,0.18);color:#ff6080;}
.pp-vip{background:rgba(212,175,55,0.12);color:var(--gold);}
.pp-biz{background:rgba(59,130,246,0.12);color:#60a5fa;}
.pp-equip{background:rgba(234,88,12,0.12);color:#fb923c;}
.post-acts{display:flex;gap:6px;flex-shrink:0;}
.act{padding:6px 11px;border-radius:8px;font-size:11px;font-weight:800;cursor:pointer;border:none;font-family:var(--font);transition:all 0.2s;}
.act-del{background:rgba(239,68,68,0.1);border:1px solid rgba(239,68,68,0.25);color:#ef4444;}
.act-del:hover{background:rgba(239,68,68,0.2);}
.act-sold{background:rgba(212,175,55,0.1);border:1px solid rgba(212,175,55,0.25);color:var(--gold);}
.act-ig{background:rgba(244,114,182,0.1);border:1px solid rgba(244,114,182,0.25);color:#f472b6;text-decoration:none;display:inline-flex;align-items:center;gap:3px;}

/* TOAST */
.toast{position:fixed;bottom:20px;left:50%;transform:translateX(-50%) translateY(60px);background:var(--bg2);border:1px solid var(--border);padding:10px 22px;border-radius:100px;font-size:13px;font-weight:600;z-index:9999;transition:transform 0.3s;}
.toast.show{transform:translateX(-50%) translateY(0);}
.toast.s{border-color:rgba(74,222,128,0.4);color:#4ade80;}
.toast.e{border-color:rgba(239,68,68,0.4);color:#ef4444;}

@media(max-width:600px){
  .pkg-selector{grid-template-columns:repeat(3,1fr);}
  .form-grid{grid-template-columns:1fr;}
  .stats{gap:6px;}
}
</style>
</head>
<body>

<!-- LOGIN -->
<div id="loginPage">
  <div class="login-box">
    <div class="l-logo">ğŸ”‘</div>
    <div class="l-title">YOUGO Admin</div>
    <div class="l-sub">× ×™×”×•×œ ××•×“×¢×•×ª ×•×¨×›×‘×™×</div>
    <input class="l-inp" id="passInp" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" onkeydown="if(event.key==='Enter')login()">
    <button class="l-btn" onclick="login()">×›× ×™×¡×”</button>
    <div class="l-err" id="lErr"></div>
  </div>
</div>

<!-- MAIN -->
<div id="mainPage">
  <nav>
    <span class="nav-title"><span>YOUGO</span> Admin</span>
    <div class="nav-acts">
      <a href="index.html" class="btn btn-ghost">â† ×”××ª×¨</a>
      <button class="btn btn-ghost" onclick="logout()">×™×¦×™××”</button>
    </div>
  </nav>

  <div class="stats">
    <div class="stat"><div class="stat-v" id="sTotal" style="color:white">0</div><div class="stat-l">×¡×”"×› ××•×“×¢×•×ª</div></div>
    <div class="stat"><div class="stat-v" id="sVip" style="color:var(--gold)">0</div><div class="stat-l">×—×‘×™×œ×•×ª VIP</div></div>
    <div class="stat"><div class="stat-v" id="sPro" style="color:#ff6080">0</div><div class="stat-l">×—×‘×™×œ×•×ª Pro</div></div>
    <div class="stat"><div class="stat-v" id="sClicks" style="color:var(--green)">0</div><div class="stat-l">×§×œ×™×§×™×</div></div>
  </div>

  <div class="content">

    <!-- ADD FORM -->
    <div class="form-card">
      <div class="fc-title">â• ×”×•×¡×£ ××•×“×¢×” ×—×“×©×”</div>

      <!-- PACKAGE SELECTOR -->
      <div class="divider">×‘×—×¨ ×—×‘×™×œ×”</div>
      <div class="pkg-selector">
        <div class="pkg-opt" id="pkg-basic" onclick="selPkg('basic')">
          <div class="pkg-icon">ğŸš—</div>
          <div class="pkg-name">×¨×›×‘ ×¤×¨×˜×™</div>
          <div class="pkg-price">â‚ª219</div>
        </div>
        <div class="pkg-opt" id="pkg-pro" onclick="selPkg('pro')">
          <div class="pkg-icon">ğŸ”¥</div>
          <div class="pkg-name">Pro</div>
          <div class="pkg-price">â‚ª349</div>
        </div>
        <div class="pkg-opt" id="pkg-vip" onclick="selPkg('vip')">
          <div class="pkg-icon">ğŸ‘‘</div>
          <div class="pkg-name">VIP</div>
          <div class="pkg-price">â‚ª899</div>
        </div>
        <div class="pkg-opt" id="pkg-biz" onclick="selPkg('biz')">
          <div class="pkg-icon">ğŸ¢</div>
          <div class="pkg-name">×¢×¡×§×™×</div>
          <div class="pkg-price">â‚ª1,499</div>
        </div>
        <div class="pkg-opt" id="pkg-equip" onclick="selPkg('equip')">
          <div class="pkg-icon">ğŸš›</div>
          <div class="pkg-name">×¦×™×•×“</div>
          <div class="pkg-price">â‚ª229</div>
        </div>
      </div>

      <div class="divider">×¤×¨×˜×™ ×”×¨×›×‘</div>
      <div class="form-grid">
        <div class="fg"><label class="lbl">×™×¦×¨×Ÿ *</label><input class="inp" id="f_make" placeholder="Toyota, BMW..."></div>
        <div class="fg"><label class="lbl">×“×’× *</label><input class="inp" id="f_model" placeholder="Corolla, X5..."></div>
        <div class="fg"><label class="lbl">×©× ×”</label><input class="inp" id="f_year" type="number" placeholder="2022"></div>
        <div class="fg"><label class="lbl">××—×™×¨ â‚ª *</label><input class="inp" id="f_price" type="number" placeholder="80000"></div>
        <div class="fg"><label class="lbl">×§×™×œ×•××˜×¨××–'</label><input class="inp" id="f_km" type="number" placeholder="50000"></div>
        <div class="fg"><label class="lbl">×™×“</label><select class="sel" id="f_hand"><option value="1">×™×“ 1</option><option value="2" selected>×™×“ 2</option><option value="3">×™×“ 3</option><option value="4">×™×“ 4+</option></select></div>
        <div class="fg"><label class="lbl">×’×™×¨</label><select class="sel" id="f_gear"><option value="××•×˜×•××˜">××•×˜×•××˜×™</option><option value="×™×“× ×™">×™×“× ×™</option><option value="CVT">CVT</option></select></div>
        <div class="fg"><label class="lbl">×“×œ×§</label><select class="sel" id="f_fuel"><option value="×‘× ×–×™×Ÿ">×‘× ×–×™×Ÿ</option><option value="×“×™×–×œ">×“×™×–×œ</option><option value="×”×™×‘×¨×™×“×™">×”×™×‘×¨×™×“×™</option><option value="×—×©××œ×™">×—×©××œ×™</option></select></div>
        <div class="fg"><label class="lbl">×¦×‘×¢</label><input class="inp" id="f_color" placeholder="×œ×‘×Ÿ, ×©×—×•×¨..."></div>
        <div class="fg"><label class="lbl">×¢×™×¨</label><input class="inp" id="f_city" placeholder="×ª×œ ××‘×™×‘..."></div>
      </div>

      <div class="divider" style="margin-top:16px">×ª××•× ×” ×•×ª×™××•×¨</div>
      <div class="form-grid">
        <div class="fg full">
          <label class="lbl">ğŸ–¼ï¸ URL ×ª××•× ×”</label>
          <input class="inp ltr" id="f_img" placeholder="https://...jpg">
          <div class="hint">×”×¢×œ×” ×œ-<a href="https://cloudinary.com" target="_blank" style="color:#f472b6">cloudinary.com</a> ×•×”×¢×ª×§ URL</div>
        </div>
        <div class="fg full">
          <label class="lbl">ğŸ“¸ Instagram URL</label>
          <input class="inp ltr" id="f_ig" placeholder="https://instagram.com/p/...">
        </div>
        <div class="fg full">
          <label class="lbl">×ª×™××•×¨</label>
          <textarea class="ta" id="f_desc" placeholder="×ª××¨ ××ª ×”×¨×›×‘..."></textarea>
        </div>
      </div>

      <div class="divider" style="margin-top:16px">×¤×¨×˜×™ ×”××•×›×¨</div>
      <div class="form-grid">
        <div class="fg"><label class="lbl">×©×</label><input class="inp" id="f_name" placeholder="×©× ×”××•×›×¨"></div>
        <div class="fg"><label class="lbl">×˜×œ×¤×•×Ÿ</label><input class="inp" id="f_phone" placeholder="050-0000000"></div>
      </div>

      <button class="submit-btn" id="submitBtn" onclick="addListing()">âœ… ×¤×¨×¡× ××•×“×¢×”</button>
    </div>

    <!-- LIST -->
    <div class="list-head">
      <h2 class="list-title">×›×œ ×”××•×“×¢×•×ª</h2>
      <button class="btn btn-ghost" onclick="loadList()">ğŸ”„ ×¨×¢× ×Ÿ</button>
    </div>
    <div id="listEl"><div style="text-align:center;padding:40px;color:var(--text2)">×˜×•×¢×Ÿ...</div></div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
const SB_URL='https://arsbodqhmmtmoqqhykep.supabase.co';
const SB_KEY='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFyc2JvZHFobW10bW9xcWh5a2VwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIxNTgxMTQsImV4cCI6MjA4NzczNDExNH0.mt_WpPshp5xdbIx23pMmcwq7MhktA0-vWPIstOy1_HM';
const sb=supabase.createClient(SB_URL,SB_KEY);
const PASS='yougo2026';
let selPkgVal='basic';

function login(){
  if(document.getElementById('passInp').value===PASS){
    document.getElementById('loginPage').style.display='none';
    document.getElementById('mainPage').style.display='block';
    selPkg('basic');
    loadList();
  } else { document.getElementById('lErr').textContent='×¡×™×¡××” ×©×’×•×™×”'; }
}
function logout(){
  document.getElementById('mainPage').style.display='none';
  document.getElementById('loginPage').style.display='flex';
}

function selPkg(v){
  selPkgVal=v;
  document.querySelectorAll('.pkg-opt').forEach(el=>{
    el.className='pkg-opt';
  });
  document.getElementById('pkg-'+v).className='pkg-opt sel-'+v;
}

async function addListing(){
  const make=document.getElementById('f_make').value.trim();
  const model=document.getElementById('f_model').value.trim();
  const price=document.getElementById('f_price').value;
  if(!make||!model||!price){showToast('××œ× ×©×“×•×ª ×—×•×‘×”','e');return;}

  const btn=document.getElementById('submitBtn');
  btn.disabled=true;btn.textContent='â³ ××•×¡×™×£...';

  const {error}=await sb.from('ig_posts').insert({
    package_type: selPkgVal,
    make, model,
    year: parseInt(document.getElementById('f_year').value)||null,
    price: parseInt(price),
    mileage: parseInt(document.getElementById('f_km').value)||null,
    hand: parseInt(document.getElementById('f_hand').value)||2,
    gear_type: document.getElementById('f_gear').value,
    fuel_type: document.getElementById('f_fuel').value,
    color: document.getElementById('f_color').value||null,
    city: document.getElementById('f_city').value||null,
    image_url: document.getElementById('f_img').value||null,
    ig_url: document.getElementById('f_ig').value||null,
    description: document.getElementById('f_desc').value||null,
    seller_name: document.getElementById('f_name').value||null,
    seller_phone: document.getElementById('f_phone').value||null,
    status:'active', clicks:0,
  });

  btn.disabled=false;btn.textContent='âœ… ×¤×¨×¡× ××•×“×¢×”';
  if(error){showToast('×©×’×™××”: '+error.message,'e');return;}
  showToast('âœ… ×¤×•×¨×¡×!');
  ['f_make','f_model','f_year','f_price','f_km','f_color','f_city','f_img','f_ig','f_desc','f_name','f_phone'].forEach(id=>document.getElementById(id).value='');
  loadList();
}

async function loadList(){
  const {data,error}=await sb.from('ig_posts').select('*').order('created_at',{ascending:false});
  if(error){document.getElementById('listEl').innerHTML=`<div style="color:#ef4444;text-align:center;padding:20px">${error.message}</div>`;return;}
  const posts=data||[];

  document.getElementById('sTotal').textContent=posts.length;
  document.getElementById('sVip').textContent=posts.filter(p=>p.package_type==='vip').length;
  document.getElementById('sPro').textContent=posts.filter(p=>p.package_type==='pro').length;
  document.getElementById('sClicks').textContent=posts.reduce((a,p)=>a+(p.clicks||0),0);

  if(!posts.length){document.getElementById('listEl').innerHTML='<div style="text-align:center;padding:40px;color:var(--text2)">××™×Ÿ ××•×“×¢×•×ª ×¢×“×™×™×Ÿ</div>';return;}

  const ICONS={basic:'ğŸš—',pro:'ğŸ”¥',vip:'ğŸ‘‘',biz:'ğŸ¢',equip:'ğŸš›'};
  const LABELS={basic:'×¨×›×‘ ×¤×¨×˜×™',pro:'Pro',vip:'VIP',biz:'×¢×¡×§×™×',equip:'×¦×™×•×“'};

  document.getElementById('listEl').innerHTML=`<div class="posts-list">${posts.map(p=>{
    const pkg=p.package_type||'basic';
    const thumb=p.image_url?`<img class="post-thumb" src="${p.image_url}" alt="">` : `<div class="post-thumb">${ICONS[pkg]||'ğŸš—'}</div>`;
    return `
      <div class="post-row pkg-${pkg}">
        ${thumb}
        <div class="post-info">
          <div class="post-name">${p.make} ${p.model} ${p.year||''}</div>
          <div class="post-price-sm">â‚ª${Number(p.price).toLocaleString()}</div>
          <div class="post-meta">
            <span class="pkg-pill pp-${pkg}">${ICONS[pkg]} ${LABELS[pkg]||pkg}</span>
            ${p.city?`<span>ğŸ“ ${p.city}</span>`:''}
            ${p.clicks?`<span>ğŸ‘ ${p.clicks}</span>`:''}
          </div>
        </div>
        <div class="post-acts">
          ${p.ig_url?`<a class="act act-ig" href="${p.ig_url}" target="_blank">ğŸ“¸</a>`:''}
          <button class="act act-del" onclick="del('${p.id}')">âœ•</button>
        </div>
      </div>`;
  }).join('')}</div>`;
}

async function del(id){
  if(!confirm('×œ××—×•×§?'))return;
  const{error}=await sb.from('ig_posts').delete().eq('id',id);
  if(!error){showToast('× ××—×§ âœ“');loadList();}
}

function showToast(msg,type='s'){
  const el=document.getElementById('toast');
  el.textContent=msg;el.className=`toast ${type} show`;
  setTimeout(()=>el.classList.remove('show'),3000);
}
</script>
</body>
</html>
